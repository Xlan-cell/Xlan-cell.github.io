

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://q.qlogo.cn/headimg_dl?dst_uin=819429207&amp;spec=640&amp;img_type=jpg">
  <link rel="icon" href="https://q.qlogo.cn/headimg_dl?dst_uin=819429207&amp;spec=640&amp;img_type=jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="Spring框架Spring复习1.了解Spirngspirng-&gt;spring mvc -&gt;spring boot -&gt;spring cloud  层层递进–  2.IOC -Di 了解由分层解耦引出的依赖注入 以及依赖反转  如图 -&gt;当我们想更改对象 BookDaoImp12 名字时候-&gt;时 -&gt;所有业务代码都需要改动改动过大-&gt; Ioc-&gt;控">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring框架">
<meta property="og:url" content="http://example.com/2024/09/10/Spring%E5%A4%8D%E4%B9%A0/index.html">
<meta property="og:site_name" content="逆向狗">
<meta property="og:description" content="Spring框架Spring复习1.了解Spirngspirng-&gt;spring mvc -&gt;spring boot -&gt;spring cloud  层层递进–  2.IOC -Di 了解由分层解耦引出的依赖注入 以及依赖反转  如图 -&gt;当我们想更改对象 BookDaoImp12 名字时候-&gt;时 -&gt;所有业务代码都需要改动改动过大-&gt; Ioc-&gt;控">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/48b2da9ced4cd0074a9fdd4f7c0a4318.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3a684778fcbcadf529eaad2b4e9ca34d.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ab5ce66c757c262b95bdbeb4ec1862ad.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1f0310fa78da12366d47e8d7844a002a.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ed3173cdd0c9bc6ba6d44953a8c38e0a.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/19c1fd155ec41e2182592cffc5262d96.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/506c12b2db4dd7aca712594fa5e279fa.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/838a65e2572d2c5fafc8c03d3a3ffd44.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/dace05b9aa02d6ab02fd488a060b202e.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eed54b5a29e21c9568ee7b195168d180.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2a1a6f9cec7eca02be1d7807228f64ae.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/316948bfd792a80f844396040f862c94.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8f41e07fcd21e2e60e49873e445f8656.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/20bd78b82f85ef5660348295b0f97bf6.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2509eb7c62e476183b724c53e7881f29.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/dd082cfbea4d7e4b13aa31843b6f35c3.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3f411aabb27ce975d2121258bbe3d082.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a1a7897db2e6c6a81a71ae18c1629103.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0b42710ae7bb291a8a7f65ac715b86bc.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/87ed0bfac3a4d77291ac594173873a77.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2ac8de3631e734a2817de72f0e21076e.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/906d5345ed81c62f2ca79c2c87182043.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/37aa8dfa1862573eb20ad4710135f7a0.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d7f4076b8a85df6389a465186386ba9f.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d604dff0d944968b0f83ef5e0ed9148f.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6956e79faab9804acbd6a47b860b0245.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/43ed876a380305fa263d981c7a984c74.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ca7bbcd65d882884d7297dd75609d006.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2fac8b9f2d57b4c92547d6a8235169a4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/00252469c47ede33f309cf222de6d27a.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3259185201691e092710f1c19ad74f73.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e482c7cd8837d44f0b1684ae235838c7.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/88afb0e3109da0ceb049ce45b2ea81dd.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6441e65ec06a343800d7d118ec915bf7.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8d310da378a35e1bc86067389adf5c3b.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ccb6cf9576f42e82a4190ea129f29b18.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/aec185bb8dc978e09e302c6e168d677e.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/18abb534418dab1c205c287cd041975f.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/86b345941eab120771d71166dbf2beb3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/547c0427ec597688cc1c0ec42b75f8a2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8e5159d69c7dd85c33f019d20ac3be99.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ede5cccd6b754d10bd7e5d2dfb4db131.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/f4d394d6384f8e1211f0b8775862a884.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2cde566b050a6d34fbe85be5502e6c50.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/73301e328b26e40279005a10ac179d9b.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b515a9216fdb4b0cf13229af949a5107.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/26e0669596d4e65ef8badc876869a654.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/f1c3b59e56b859a8a04b94fa9cc65876.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/image-20240330164305805.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2f09511581cde24e3c7dfcb783c3dc4c.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b4f6fbbd9134d7813d17dec19a77cd8c.jpeg">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b0484d9f1bbe10d4207d84882472bf29.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e0a84ff1d8ccee34eb3876e12a63ef97.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3ce5a2480e7eaf7f880d1624f4013487.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c9a1881e71612ce58b920331bae4d304.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6ecb0785b0a6a59af4c08f919aeb6b9e.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/342dd9a76057ac1992637973417a63c8.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9b888313da273ab68bfb514f19274a0b.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b6f65b886518d3736b235a310f1a6754.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/59d7f8499d23c0a2bcfdb780f1e00ea3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/03f05df2aa222c9fb3abd3efb44ef699.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5dde408db43ac7d09f859c76ed257c91.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/fba20ae7cf0e8f32ff7aa3de0fb42e42.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9972f6f167883d144abc515733c62536.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5f99a409d1ff453639c1d9cc7aa2fcf2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/cf8e05d7e9f071a8464d78b45eab2ae5.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/fa818038f3cf6f80cf14608cec80c598.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/11abe4ba3472982e3b1b217edb94c96e.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e038210f851e6d054f2de5a40605d29c.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eb16bf7c1655375464b67dcd0194534b.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/241a0676f37e4b12a5eef8cdc8e7fe35.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/79a9256b4115e3f74adcb4dfc1db5f30.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3ba320445dccb955e30224a3bbee6193.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7ff11a9112a3615d298943a68b54e9d6.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/55cab2a9fb9c8def31581e7f33474ad0.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6981732edb98c9b849ff758c5c4053c1.png">
<meta property="article:published_time" content="2024-09-10T12:22:30.000Z">
<meta property="article:modified_time" content="2024-09-11T03:58:50.796Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/48b2da9ced4cd0074a9fdd4f7c0a4318.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Spring框架 - 逆向狗</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>逆向狗</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://s1.locimg.com/2024/09/06/63bc048e8a257.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Spring框架"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        John Doe
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-09-10 20:22" pubdate>
          2024年9月10日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          47 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Spring框架</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Spring框架"><a href="#Spring框架" class="headerlink" title="Spring框架"></a>Spring框架</h1><h1 id="Spring复习"><a href="#Spring复习" class="headerlink" title="Spring复习"></a>Spring复习</h1><h4 id="1-了解Spirng"><a href="#1-了解Spirng" class="headerlink" title="1.了解Spirng"></a>1.了解Spirng</h4><p>spirng-&gt;spring mvc -&gt;spring boot -&gt;spring cloud</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/48b2da9ced4cd0074a9fdd4f7c0a4318.png" srcset="/img/loading.gif" lazyload alt="48b2da9ced4cd0074a9fdd4f7c0a4318"></p>
<p>层层递进–</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3a684778fcbcadf529eaad2b4e9ca34d.png" srcset="/img/loading.gif" lazyload alt="3a684778fcbcadf529eaad2b4e9ca34d"></p>
<h4 id="2-IOC-Di-了解"><a href="#2-IOC-Di-了解" class="headerlink" title="2.IOC -Di 了解"></a>2.IOC -Di 了解</h4><p>由分层解耦引出的依赖注入 以及依赖反转</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ab5ce66c757c262b95bdbeb4ec1862ad.png" srcset="/img/loading.gif" lazyload alt="ab5ce66c757c262b95bdbeb4ec1862ad"></p>
<p>如图 -&gt;当我们想更改对象 BookDaoImp12 名字时候-&gt;时 -&gt;所有业务代码都需要改动改动过大-&gt;</p>
<p>Ioc-&gt;控制反转<br>使用对象–由主动new-改为外部提供对象-&gt;对象控制器转移到外部</p>
<p>对此-spring提供容器-&gt;ioc容器 -&gt;提供了对象的创建和管理</p>
<p>依赖注入</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1f0310fa78da12366d47e8d7844a002a.png" srcset="/img/loading.gif" lazyload alt="1f0310fa78da12366d47e8d7844a002a"></p>
<p>IOC-&gt;容器管理Bean-&gt;容器管理bookdaoimpl</p>
<p>DI-&gt;将具有依赖关系的Bean进行关系绑定-&gt;例如上面的bookdao-&gt;与bookdaoimpl进行绑定  Spring利用依赖注入机制来处理这些Bean之间的依赖关系，从而实现对象之间的松耦合。</p>
<h4 id="3-加入IOC-容器"><a href="#3-加入IOC-容器" class="headerlink" title="3.加入IOC 容器"></a>3.加入IOC 容器<img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ed3173cdd0c9bc6ba6d44953a8c38e0a.png" srcset="/img/loading.gif" lazyload alt="ed3173cdd0c9bc6ba6d44953a8c38e0a"></h4><h6 id="1-配置Bean"><a href="#1-配置Bean" class="headerlink" title="1.配置Bean"></a>1.配置Bean</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/19c1fd155ec41e2182592cffc5262d96.png" srcset="/img/loading.gif" lazyload alt="19c1fd155ec41e2182592cffc5262d96"></p>
<p>2.获取Bean</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/506c12b2db4dd7aca712594fa5e279fa.png" srcset="/img/loading.gif" lazyload alt="506c12b2db4dd7aca712594fa5e279fa"></p>
<p>当我们配置bean的时候–容器内就保存了我们的对象地址-&gt;单例-&gt;谁需要就给予</p>
<h6 id="2-依赖注入"><a href="#2-依赖注入" class="headerlink" title="2.依赖注入"></a>2.依赖注入</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/838a65e2572d2c5fafc8c03d3a3ffd44.png" srcset="/img/loading.gif" lazyload alt="838a65e2572d2c5fafc8c03d3a3ffd44"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/dace05b9aa02d6ab02fd488a060b202e.png" srcset="/img/loading.gif" lazyload alt="dace05b9aa02d6ab02fd488a060b202e"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eed54b5a29e21c9568ee7b195168d180.png" srcset="/img/loading.gif" lazyload alt="eed54b5a29e21c9568ee7b195168d180"></p>
<p>set容器执行-&gt;最后还是容器将Bean给予了</p>
<p>spring-&gt;编译 –自动找set 依赖方法注入</p>
<h4 id="4-Bean配置"><a href="#4-Bean配置" class="headerlink" title="4.Bean配置"></a>4.Bean配置</h4><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2a1a6f9cec7eca02be1d7807228f64ae.png" srcset="/img/loading.gif" lazyload alt="2a1a6f9cec7eca02be1d7807228f64ae"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/316948bfd792a80f844396040f862c94.png" srcset="/img/loading.gif" lazyload alt="316948bfd792a80f844396040f862c94"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8f41e07fcd21e2e60e49873e445f8656.png" srcset="/img/loading.gif" lazyload alt="8f41e07fcd21e2e60e49873e445f8656"></p>
<p>spring-&gt;默认的Bean是单例的</p>
<p>如果需要多例 就需要修改配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/20bd78b82f85ef5660348295b0f97bf6.png" srcset="/img/loading.gif" lazyload alt="20bd78b82f85ef5660348295b0f97bf6"></p>
<p>为什么bean要单例–<br>开对象-&gt;耗费内存</p>
<p>由于是单例-&gt;需要改变的数据就不能加入spring管理-&gt;除非开多例</p>
<h4 id="5-Bean实例化"><a href="#5-Bean实例化" class="headerlink" title="5.Bean实例化"></a>5.Bean实例化</h4><h6 id="1-ioc过程"><a href="#1-ioc过程" class="headerlink" title="1.ioc过程"></a>1.ioc过程</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2509eb7c62e476183b724c53e7881f29.png" srcset="/img/loading.gif" lazyload alt="2509eb7c62e476183b724c53e7881f29"></p>
<p>给接口内-&gt;一个构造-&gt;通过xml解析出 需要构造的对象-&gt;通过反射 -&gt;创建出对象返回-&gt;默认单例</p>
<p>通过类名动态加载类的方法</p>
<p>在使用 <code>Class.forName()</code> 方法时，情况会根据加载的类是否已存在而有所不同：</p>
<ol>
<li><strong>类已存在</strong>：<ul>
<li>如果使用 <code>Class.forName()</code> 加载的类在类路径中已经存在，则会返回对应的 Class 对象，而不会创建新的对象。这意味着它只是获取已加载类的引用，不会触发类的初始化和实例化。</li>
</ul>
</li>
<li><strong>类不存在</strong>：<ul>
<li>如果要加载的类在类路径中不存在，则会抛出 <code>ClassNotFoundException</code> 异常，而不会创建新的类对象。在这种情况下，不会创建新的类对象，因为类根本就没有被加载到内存中</li>
</ul>
</li>
</ol>
<h6 id="2-工厂模式"><a href="#2-工厂模式" class="headerlink" title="2.工厂模式"></a>2.工厂模式</h6><p>工厂模式 -&gt;由一个类中的静态方法-&gt;返回对象的引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyServiceFactory</span> &#123;<br>    <span class="hljs-comment">// 静态工厂方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MyService <span class="hljs-title function_">createInstance</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;通过静态工厂方法创建 MyService 实例&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyServiceImpl</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><code>createInstance()</code> 是静态工厂方法，负责返回 <code>MyService</code> 类型的对象。</p>
<p>在 Spring 配置文件中使用 <code>&lt;bean&gt;</code> 标签指定静态工厂方法：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;myService&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;com.example.MyServiceFactory&quot;</span> <span class="hljs-attribute">factory-method</span>=<span class="hljs-string">&quot;createInstance&quot;</span>/&gt;<br></code></pre></td></tr></table></figure>

<p> Java 注解配置静态工厂方法</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-variable">@Configuration</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppConfig</span> </span>&#123;<br>    <span class="hljs-variable">@Bean</span><br>    public MyService myService() &#123;<br>        <span class="hljs-keyword">return</span> MyServiceFactory.createInstance();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h6 id="3-实例工厂"><a href="#3-实例工厂" class="headerlink" title="3.实例工厂-"></a>3.实例工厂-</h6><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyServiceFactory</span> &#123;<br>    <span class="hljs-comment">// 实例工厂方法</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> MyService <span class="hljs-title">createInstance</span>()</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;通过实例工厂方法创建 MyService 实例&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyService();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p> Spring 配置文件（<code>applicationContext.xml</code>）中，通过 <code>&lt;bean&gt;</code> 标签配置实例工厂：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml">xml复制代码<span class="hljs-comment">&lt;!-- 配置工厂类的 Bean --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myServiceFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.MyServiceFactory&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- 使用工厂类的实例方法创建 Bean --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myService&quot;</span> <span class="hljs-attr">factory-bean</span>=<span class="hljs-string">&quot;myServiceFactory&quot;</span> <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;createInstance&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>

<p>获取bean</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ApplicationContext context <span class="hljs-operator">=</span> new ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>)<span class="hljs-comment">;</span><br>MyService myService <span class="hljs-operator">=</span> (MyService) context.getBean(<span class="hljs-string">&quot;myService&quot;</span>)<span class="hljs-comment">;</span><br>myService.doSomething()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>Spring 容器首先会创建 <code>MyServiceFactory</code> 的实例，然后调用其 <code>createInstance</code> 方法来创建 <code>MyService</code> 实例。</p>
<p> Java 注解配置实例工厂方法</p>
<p>&#x2F;&#x2F;多了一步-先获取到实例工厂bean才能够注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span> &#123;<br>    <br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MyServiceFactory <span class="hljs-title function_">myServiceFactory</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyServiceFactory</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MyService <span class="hljs-title function_">myService</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> myServiceFactory().createInstance();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h6 id="FactoryBean"><a href="#FactoryBean" class="headerlink" title="FactoryBean"></a>FactoryBean</h6><p>在 Spring 框架中，<code>FactoryBean</code> 是一个特殊的接口，用于自定义 Bean 的创建逻辑</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function">Object <span class="hljs-title">getObject</span>(): 返回要创建的 Bean 实例。这个方法用于定义实际的对象创建逻辑。</span><br><span class="hljs-function">Class&lt;?&gt; <span class="hljs-title">getObjectType</span>(): 返回创建的 Bean 的类型。</span><br><span class="hljs-function">boolean <span class="hljs-title">isSingleton</span>(): 指示这个 Bean 是否是单例模式。返回 <span class="hljs-literal">true</span> 表示单例，<span class="hljs-literal">false</span> 表示每次请求都会创建一个新的实例。</span><br></code></pre></td></tr></table></figure>



<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/dd082cfbea4d7e4b13aa31843b6f35c3.jpeg" srcset="/img/loading.gif" lazyload alt="dd082cfbea4d7e4b13aa31843b6f35c3"></p>
<p>指定类-扫描</p>
<p>Spring 容器会创建一个 <code>CarFactoryBean</code> 的实例，并调用它的 <code>getObject()</code> 方法来获取 <code>Car</code> 对象。</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ApplicationContext context <span class="hljs-operator">=</span> new ClassPathXmlApplicationContext(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>)<span class="hljs-comment">;</span><br><br>// 获取由 CarFactoryBean 创建的 UserDao 实例<br>UserDao car <span class="hljs-operator">=</span> (Car) context.getBean(<span class="hljs-string">&quot;UserdAOfACTORBEAN&quot;</span>)<span class="hljs-comment">;</span><br>System.out.println(car)<span class="hljs-comment">;</span><br><br>// 获取 CarFactoryBean 实例本身<br>CarFactoryBean factoryBean <span class="hljs-operator">=</span> (CarFactoryBean) context.getBean(<span class="hljs-string">&quot;&amp;UserdAOfACTORBEAN&quot;</span>)<span class="hljs-comment">;</span><br>System.out.println(factoryBean)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>



<h4 id="6-Bean生命周期"><a href="#6-Bean生命周期" class="headerlink" title="6.Bean生命周期"></a>6.Bean生命周期</h4><h6 id="1-生命周期配置"><a href="#1-生命周期配置" class="headerlink" title="1.生命周期配置"></a>1.生命周期配置</h6><p>1.配置法</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3f411aabb27ce975d2121258bbe3d082.jpeg" srcset="/img/loading.gif" lazyload alt="3f411aabb27ce975d2121258bbe3d082"></p>
<p>2.接口法</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a1a7897db2e6c6a81a71ae18c1629103.jpg" srcset="/img/loading.gif" lazyload alt="a1a7897db2e6c6a81a71ae18c1629103"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0b42710ae7bb291a8a7f65ac715b86bc.png" srcset="/img/loading.gif" lazyload alt="0b42710ae7bb291a8a7f65ac715b86bc"></p>
<h6 id="2-bean销毁时间"><a href="#2-bean销毁时间" class="headerlink" title="2.bean销毁时间"></a>2.bean销毁时间</h6><p>为了体现生命周期-&gt;我们提前销毁bean</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/87ed0bfac3a4d77291ac594173873a77.jpeg" srcset="/img/loading.gif" lazyload alt="87ed0bfac3a4d77291ac594173873a77"></p>
<h4 id="7-依赖注入"><a href="#7-依赖注入" class="headerlink" title="7.依赖注入"></a>7.依赖注入</h4><h6 id="1-了解依赖注入"><a href="#1-了解依赖注入" class="headerlink" title="1.了解依赖注入"></a>1.了解依赖注入</h6><p>有Bean关系的类进行自动注入 —向类传递数据方式-set 传递 –构造传参</p>
<hr>
<p>参数–引用类型和简单类型</p>
<h6 id="2-引用注入"><a href="#2-引用注入" class="headerlink" title="2.引用注入"></a>2.引用注入</h6><p><strong>引用注入</strong> 是指将一个对象作为另一个对象的属性注入。例如，在一个类中注入另一个类的实例。在 XML 配置或基于注解的方式中，都可以实现引用注入。</p>
<p><strong>引用注入是指将一个 Bean 注入到另一个 Bean 中，这个 Bean 可以通过构造器、Setter 方法、或其他方式注入。引用注入强调的是一种</strong>引用关系**。</p>
<p><code>Person</code> 类需要 <code>Address</code> 类的实例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> &#123;<br>    <span class="hljs-keyword">private</span> String city;<br>    <span class="hljs-keyword">private</span> String street;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Address address; <span class="hljs-comment">// 引用注入</span><br><span class="hljs-comment">// getters and setters</span><br><br><span class="hljs-keyword">public</span> Address <span class="hljs-title function_">getAddress</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> address;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAddress</span><span class="hljs-params">(Address address)</span> &#123;<br>    <span class="hljs-built_in">this</span>.address = address;<br>&#125;<br>    <span class="hljs-comment">//构造器</span><br>Person(Address address)<br>&#123;<br>    <span class="hljs-built_in">this</span>.address = address;<br>&#125;<br>    <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Person</code> 类依赖于 <code>Address</code> 类，即 <code>Person</code> 拥有一个 <code>Address</code> 类型的属性。我们可以通过 Spring 配置文件来实现引用注入。</p>
<p>XML 配置引用注入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.Address&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;city&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;New York&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;street&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5th Avenue&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;person&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.example.Person&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;John Doe&quot;</span>/&gt;</span>//属性注入<br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;address&quot;</span>/&gt;</span> <span class="hljs-comment">&lt;!-- 引用注入 --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>///ref 属性表示引用另一个 Bean。<br></code></pre></td></tr></table></figure>

<p>基于注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;    <br><span class="hljs-keyword">private</span> String name;    <br><span class="hljs-meta">@Autowired</span> <span class="hljs-comment">// 注解方式引用注入    </span><br><span class="hljs-keyword">private</span> Address address;   <br>/<br>/ getters and setters    <span class="hljs-comment">//... &#125;</span><br></code></pre></td></tr></table></figure>

<h6 id="3-setter注入"><a href="#3-setter注入" class="headerlink" title="3.setter注入"></a>3.setter注入</h6><p><strong>Setter 注入</strong> 是一种通过提供 setter 方法来实现依赖注入的方式</p>
<p>Setter 注入通常用于将简单数据类型（如 <code>String</code>、<code>int</code>）或引用类型注入到 Bean 中。在 XML 配置中使用 <code>&lt;property&gt;</code> 标签来定义：</p>
<p><code>&lt;property&gt;</code> 标签的 <code>name</code> 属性表示要注入的属性名称，<code>value</code> 属性表示简单数据类型的值，<code>ref</code> 属性表示对其他 Bean 的引用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;bean id=<span class="hljs-string">&quot;person&quot;</span> class=<span class="hljs-string">&quot;com.example.Person&quot;</span>&gt;<br>    &lt;property name=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;Jane Doe&quot;</span>/&gt; &lt;!-- 简单类型 --&gt;<br>    &lt;property name=<span class="hljs-string">&quot;address&quot;</span> ref=<span class="hljs-string">&quot;address&quot;</span>/&gt; &lt;!-- 引用类型 --&gt;<br>&lt;/bean&gt;<br>    <br></code></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Address</span> address;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Address</span> <span class="hljs-title function_">getAddress</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> address;<br>    &#125;<br>    <span class="hljs-meta">@Autowired</span> <span class="hljs-comment">// 基于注解的 Setter 注入</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAddress</span>(<span class="hljs-params"><span class="hljs-title class_">Address</span> address</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">address</span> = address;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h6 id="4-构造器注入"><a href="#4-构造器注入" class="headerlink" title="4.构造器注入"></a>4.构造器注入</h6><p><strong><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2ac8de3631e734a2817de72f0e21076e.jpeg" srcset="/img/loading.gif" lazyload alt="2ac8de3631e734a2817de72f0e21076e"></strong></p>
<p><strong><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/906d5345ed81c62f2ca79c2c87182043.jpeg" srcset="/img/loading.gif" lazyload alt="906d5345ed81c62f2ca79c2c87182043"></strong></p>
<p><strong><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/37aa8dfa1862573eb20ad4710135f7a0.jpeg" srcset="/img/loading.gif" lazyload alt="37aa8dfa1862573eb20ad4710135f7a0"></strong></p>
<h6 id="4-依赖注入方式选择"><a href="#4-依赖注入方式选择" class="headerlink" title="4.依赖注入方式选择"></a>4.依赖注入方式选择</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d7f4076b8a85df6389a465186386ba9f.jpeg" srcset="/img/loading.gif" lazyload alt="d7f4076b8a85df6389a465186386ba9f"></p>
<h6 id="5-依赖自动装配"><a href="#5-依赖自动装配" class="headerlink" title="5.依赖自动装配"></a>5.依赖自动装配</h6><p>IOC容器根据bean所依赖的资源在容器中自动查找并注入到bena的过程称为自动装配</p>
<p>1.按类型</p>
<p>2.按名称</p>
<p>3.按构造方法</p>
<p>4.不启用自动装配</p>
<p><strong><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d604dff0d944968b0f83ef5e0ed9148f.png" srcset="/img/loading.gif" lazyload alt="d604dff0d944968b0f83ef5e0ed9148f"></strong></p>
<p>更改自动装配为按照类型</p>
<p>比如bookServcice依赖BookDao–我们不需要描述其关系 程序会自动根据名字找到对应类的bean</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Autowired</span> <span class="hljs-comment">// 基于注解的 Setter 注入 不需要`&lt;property&gt;来描述引用关系</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAddress</span>(<span class="hljs-params"><span class="hljs-title class_">BookDao</span> bookDao</span>) &#123;<br>       <span class="hljs-variable language_">this</span>.<span class="hljs-property">bookDao</span> = bookDao;<br>   &#125;<br></code></pre></td></tr></table></figure>



<h4 id="8-集合注入"><a href="#8-集合注入" class="headerlink" title="8.集合注入"></a>8.集合注入</h4><h6 id="1-数组"><a href="#1-数组" class="headerlink" title="1.数组"></a>1.数组</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6956e79faab9804acbd6a47b860b0245.png" srcset="/img/loading.gif" lazyload alt="6956e79faab9804acbd6a47b860b0245"></p>
<h6 id="2-list"><a href="#2-list" class="headerlink" title="2.list"></a>2.list</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/43ed876a380305fa263d981c7a984c74.png" srcset="/img/loading.gif" lazyload alt="43ed876a380305fa263d981c7a984c74"></p>
<h6 id="3-Set"><a href="#3-Set" class="headerlink" title="3.Set"></a>3.Set</h6><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;p&gt;</span><br><span class="hljs-section">&lt;set&gt;</span><br><br><span class="hljs-section">&lt;/set&gt;</span><br><span class="hljs-section">&lt;/p&gt;</span><br></code></pre></td></tr></table></figure>



<h6 id="4-Map"><a href="#4-Map" class="headerlink" title="4.Map"></a>4.Map</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ca7bbcd65d882884d7297dd75609d006.png" srcset="/img/loading.gif" lazyload alt="ca7bbcd65d882884d7297dd75609d006"></p>
<h6 id="5-Properties"><a href="#5-Properties" class="headerlink" title="5.Properties"></a>5.Properties</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2fac8b9f2d57b4c92547d6a8235169a4.png" srcset="/img/loading.gif" lazyload alt="2fac8b9f2d57b4c92547d6a8235169a4"></p>
<h4 id="9-案例分析-bean注入"><a href="#9-案例分析-bean注入" class="headerlink" title="9.案例分析-bean注入"></a>9.案例分析-bean注入</h4><p>我们要拿到druid的连接</p>
<p>1.配置bean -注入参数</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/00252469c47ede33f309cf222de6d27a.png" srcset="/img/loading.gif" lazyload alt="00252469c47ede33f309cf222de6d27a"></p>
<p>我们就可以进行拿取</p>
<p>Set注入–进行注入传普通参数</p>
<h4 id="10-加载properties文件"><a href="#10-加载properties文件" class="headerlink" title="10.加载properties文件"></a>10.加载properties文件</h4><p><code>.properties</code> 文件的结构和格式</p>
<ul>
<li><strong>文件扩展名</strong>：<code>.properties</code></li>
<li><strong>基本格式</strong>：每行包含一个键值对，格式为 <code>key=value</code></li>
</ul>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3259185201691e092710f1c19ad74f73.png" srcset="/img/loading.gif" lazyload alt="3259185201691e092710f1c19ad74f73"></p>
<p>加载模式</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e482c7cd8837d44f0b1684ae235838c7.png" srcset="/img/loading.gif" lazyload alt="e482c7cd8837d44f0b1684ae235838c7"></p>
<h4 id="11-容器"><a href="#11-容器" class="headerlink" title="11.容器"></a>11.容器</h4><p>创建过程包括多个关键步骤，从加载配置文件、解析 Bean 定义，到创建和初始化 Bean，再到处理 Bean 的生命周期和容器的启动与关闭。</p>
<h6 id="1-初始化容器"><a href="#1-初始化容器" class="headerlink" title="1.初始化容器"></a>1.初始化容器</h6><p><strong>加载配置</strong>：Spring 容器从配置文件或注解中加载应用程序的配置。这些配置文件可以是 XML 文件、Java 配置类（使用 <code>@Configuration</code> 注解）、或通过其他方式如 YAML 文件等</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/88afb0e3109da0ceb049ce45b2ea81dd.png" srcset="/img/loading.gif" lazyload alt="88afb0e3109da0ceb049ce45b2ea81dd"></p>
<p>创建 ApplicationContext 实例</p>
<p>ApplicationContext context &#x3D; new ClassPathXmlApplicationContext(“applicationContext.xml”);</p>
<h6 id="2-加载-Bean-定义"><a href="#2-加载-Bean-定义" class="headerlink" title="2.加载 Bean 定义"></a>2.加载 Bean 定义</h6><p>流程</p>
<p><strong>解析配置</strong>：Spring 容器解析配置文件中的 Bean 定义（包括 Bean 的类名、构造器参数、属性值等），或扫描标注有 <code>@Component</code>、<code>@Service</code>、<code>@Repository</code>、<code>@Controller</code> 等注解的类。</p>
<p><strong>注册 Bean 定义</strong>：将解析得到的 Bean 定义注册到容器中。这包括 Bean 的名称、类型、作用域（如单例或原型）、依赖关系等信息。</p>
<p><strong>创建 Bean 实例</strong>：根据 Bean 定义，Spring 容器创建 Bean 实例。Spring 使用反射机制调用 Bean 的构造函数（若是构造器注入）或默认构造函数。</p>
<p><strong>依赖注入</strong>：在 Bean 实例创建后，Spring 容器根据 Bean 定义的依赖关系注入所需的依赖。这包括构造器注入、Setter 注入、字段注入等方式。</p>
<p><strong>执行初始化方法</strong>：</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6441e65ec06a343800d7d118ec915bf7.png" srcset="/img/loading.gif" lazyload alt="6441e65ec06a343800d7d118ec915bf7"></p>
<p>处理 Bean 的生命周期</p>
<p><strong>Bean 销毁</strong>：在容器关闭时，Spring 会销毁 Bean。-&gt;bean生命周期方法</p>
<p> <strong>容器的启动和关闭</strong></p>
<p><strong>启动容器</strong>：Spring 容器在创建完成后会启动并准备好处理应用程序的请求和交互。此时，所有的 Bean 都已经被创建和初始化完毕，可以使用它们提供的功能。</p>
<p><strong>关闭容器</strong>：容器可以通过调用 <code>ApplicationContext</code> 的 <code>close</code> 方法来关闭。在关闭过程中，容器会执行 Bean 的销毁操作，释放资源，完成容器的清理工作。</p>
<h6 id="3-容器接口分析"><a href="#3-容器接口分析" class="headerlink" title="3.容器接口分析"></a>3.容器接口分析</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8d310da378a35e1bc86067389adf5c3b.png" srcset="/img/loading.gif" lazyload alt="8d310da378a35e1bc86067389adf5c3b"></p>
<h6 id="4-BeanFactory初始化"><a href="#4-BeanFactory初始化" class="headerlink" title="4.BeanFactory初始化"></a>4.BeanFactory初始化</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ccb6cf9576f42e82a4190ea129f29b18.png" srcset="/img/loading.gif" lazyload alt="ccb6cf9576f42e82a4190ea129f29b18"></p>
<h2 id="IOC-DI-Bean总结"><a href="#IOC-DI-Bean总结" class="headerlink" title="IOC DI Bean总结"></a>IOC DI Bean总结</h2><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/aec185bb8dc978e09e302c6e168d677e.jpeg" srcset="/img/loading.gif" lazyload alt="aec185bb8dc978e09e302c6e168d677e"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/18abb534418dab1c205c287cd041975f.jpeg" srcset="/img/loading.gif" lazyload alt="18abb534418dab1c205c287cd041975f"></p>
<h1 id="高级篇"><a href="#高级篇" class="headerlink" title="高级篇"></a>高级篇</h1><h4 id="12-注解"><a href="#12-注解" class="headerlink" title="12.注解"></a>12.注解</h4><h6 id="1-声明为Bean"><a href="#1-声明为Bean" class="headerlink" title="1.@声明为Bean"></a>1.@声明为Bean</h6><p>将一个类声明为Bean</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/86b345941eab120771d71166dbf2beb3.png" srcset="/img/loading.gif" lazyload alt="86b345941eab120771d71166dbf2beb3"></p>
<p>为了适配MVC-&gt;故此还有 @Controller @Service @Repository</p>
<h6 id="2-纯注解配置"><a href="#2-纯注解配置" class="headerlink" title="2.纯注解配置"></a>2.纯注解配置</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/547c0427ec597688cc1c0ec42b75f8a2.png" srcset="/img/loading.gif" lazyload alt="547c0427ec597688cc1c0ec42b75f8a2"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8e5159d69c7dd85c33f019d20ac3be99.png" srcset="/img/loading.gif" lazyload alt="8e5159d69c7dd85c33f019d20ac3be99"></p>
<h6 id="3-依赖注入"><a href="#3-依赖注入" class="headerlink" title="3.依赖注入"></a>3.依赖注入</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/ede5cccd6b754d10bd7e5d2dfb4db131.png" srcset="/img/loading.gif" lazyload alt="ede5cccd6b754d10bd7e5d2dfb4db131"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/f4d394d6384f8e1211f0b8775862a884.png" srcset="/img/loading.gif" lazyload alt="f4d394d6384f8e1211f0b8775862a884"></p>
<p>简单类型注入</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2cde566b050a6d34fbe85be5502e6c50.png" srcset="/img/loading.gif" lazyload alt="2cde566b050a6d34fbe85be5502e6c50"></p>
<h6 id="4-加载properties文件"><a href="#4-加载properties文件" class="headerlink" title="4.加载properties文件"></a>4.加载properties文件</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/73301e328b26e40279005a10ac179d9b.png" srcset="/img/loading.gif" lazyload alt="73301e328b26e40279005a10ac179d9b"></p>
<p>![22a1fbb70d0306860f7d4ce5107158b5](G:\360MoveData\Users\nixg\Documents\Tencent Files\819429207\nt_qq\nt_data\Pic\2024-03\Ori\22a1fbb70d0306860f7d4ce5107158b5.png)</p>
<h6 id="5-第三方bean管理例子"><a href="#5-第三方bean管理例子" class="headerlink" title="5.第三方bean管理例子"></a>5.第三方bean管理例子</h6><p>1.注册为bean</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b515a9216fdb4b0cf13229af949a5107.png" srcset="/img/loading.gif" lazyload alt="b515a9216fdb4b0cf13229af949a5107"></p>
<p>2.加入管理-导入式</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/26e0669596d4e65ef8badc876869a654.png" srcset="/img/loading.gif" lazyload alt="26e0669596d4e65ef8badc876869a654"></p>
<p>扫描式</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/f1c3b59e56b859a8a04b94fa9cc65876.png" srcset="/img/loading.gif" lazyload alt="f1c3b59e56b859a8a04b94fa9cc65876"></p>
<p>简单依赖注入</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/image-20240330164305805.png" srcset="/img/loading.gif" lazyload alt="image-20240330164305805"></p>
<p>—连接池配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2f09511581cde24e3c7dfcb783c3dc4c.png" srcset="/img/loading.gif" lazyload alt="2f09511581cde24e3c7dfcb783c3dc4c"></p>
<h4 id="XML与注解-配置区别"><a href="#XML与注解-配置区别" class="headerlink" title="XML与注解 配置区别"></a>XML与注解 配置区别</h4><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b4f6fbbd9134d7813d17dec19a77cd8c.jpeg" srcset="/img/loading.gif" lazyload alt="b4f6fbbd9134d7813d17dec19a77cd8c"></p>
<h4 id="13-aop"><a href="#13-aop" class="headerlink" title="13.aop"></a>13.aop</h4><h5 id="1-Aop基础"><a href="#1-Aop基础" class="headerlink" title="1.Aop基础"></a>1.Aop基础</h5><h6 id="1-原理"><a href="#1-原理" class="headerlink" title="1.原理"></a>1.原理</h6><p>AOP的原理主要是通过使用代理对象来实现，在Spring中，AOP通过代理对象包装目标对象（被代理的对象），在代理对象中插入切面（aspect），实现对目标对象方法的增强。Spring AOP主要采用动态代理技术来实现AOP，其中包括JDK动态代理和CGLIB动态代理两种方式。</p>
<blockquote>
<p>只有那些被 Spring 容器管理的 Bean（例如使用 <code>@Component</code>, <code>@Service</code>, <code>@Repository</code>, 或 <code>@Controller</code> 等注解的类，或者通过 XML 配置的 Bean），Spring 才能为它们创建代理对象。</p>
</blockquote>
<p>代理对象的工作原理</p>
<ol>
<li><p><strong>代理对象的生成</strong>：</p>
<ul>
<li>当容器启动并扫描到 <code>@EnableAspectJAutoProxy</code> 注解时，Spring AOP 框架会自动创建一个代理对象来包装原始的 <code>UserServiceImpl</code> 对象。</li>
<li>根据 <code>UserService</code> 接口类型，Spring 将使用 <strong>JDK 动态代理</strong> 创建代理对象。</li>
</ul>
</li>
<li><p><strong>切面拦截方法</strong>：</p>
<ul>
<li>代理对象接收到方法调用时，它会拦截调用并根据 AOP 配置执行相应的切面逻辑。</li>
<li>在这个例子中，代理对象会在方法执行前和执行后调用 <code>LoggingAspect</code> 中的切面方法 <code>logBeforeMethod()</code> 和 <code>logAfterMethod()</code>。</li>
</ul>
</li>
<li><p><strong>方法调用的委托</strong>：</p>
<ul>
<li><p>在执行完切面方法后，代理对象会将方法调用委托给实际的目标对象 (<code>UserServiceImpl</code>) 以完成核心业务逻辑4</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableAspectJAutoProxy</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">UserService</span> <span class="hljs-title function_">userService</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">LoggingAspect</span> <span class="hljs-title function_">loggingAspect</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingAspect</span>();<br>    &#125;<br>&#125;<br>---------------------------------<br><span class="hljs-meta">@Aspect</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingAspect</span> &#123;<br><br>    <span class="hljs-meta">@Pointcut</span>(<span class="hljs-string">&quot;execution(* com.example.service.UserService.*(..))&quot;</span>)<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">allUserServiceMethods</span>(<span class="hljs-params"></span>) &#123;&#125;<br><br>    <span class="hljs-meta">@Before</span>(<span class="hljs-string">&quot;allUserServiceMethods()&quot;</span>)<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">logBeforeMethod</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;LoggingAspect: Before method execution&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@After</span>(<span class="hljs-string">&quot;allUserServiceMethods()&quot;</span>)<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">logAfterMethod</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;LoggingAspect: After method execution&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<hr>
<p>再框架中添加了个拦截器-&gt;依据正则过滤</p>
<h6 id="2-场景"><a href="#2-场景" class="headerlink" title="2.场景"></a>2.场景</h6><ol>
<li><strong>日志记录</strong>：记录方法的调用、参数、返回值等信息。</li>
<li><strong>事务管理</strong>：管理事务的开始、提交、回滚等操作。</li>
<li><strong>安全性</strong>：实现权限控制、加密解密等安全相关功能。</li>
<li><strong>性能监控</strong>：统计方法的执行时间、次数等性能指标。</li>
</ol>
<h6 id="3-连接点-切面-切入点-通知"><a href="#3-连接点-切面-切入点-通知" class="headerlink" title="3.连接点 切面 切入点 通知"></a>3.连接点 切面 切入点 通知</h6><hr>
<p>切面 @Aspect</p>
<p>定义一个类为切面类 -通知和切入点</p>
<p>@Aspect注解标识一个类为切面类，Spring会在扫描到这个注解的类时，自动创建代理对象，并将切面逻辑织入到目标方法中。</p>
<hr>
<p>通知</p>
<p>通知（Advice）是指切面（Aspect）中定义的在程序执行过程中插入的代码片段，它们是在指定的连接点（Join Point）处执行的行为逻辑。通知的主要作用是定义在目标方法执行前后、异常抛出时等特定情况下，应该执行的动作或逻辑。</p>
<p>@Before和@After</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Before(&quot;execution(* com.example.service.UserService.*(..))&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logBeforeMethod</span><span class="hljs-params">()</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;Before method execution&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<p>切入点</p>
<p>它用于定义通知（Advice）应用的具体位置（方法或类）。切入点决定了通知在哪些连接点（Join Point）上执行。切入点的主要作用是<strong>定义通知的应用范围</strong>，即通知应该在什么情况下、对哪些方法或类生效。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">execution</span><span class="hljs-params">(* Calculator.divide(..)</span></span>)<br><br></code></pre></td></tr></table></figure>

<p>-通知+切入点-哪个方法被aop进行管理-再什么时候运行</p>
<hr>
<p>连接点</p>
<p>连接点是代码执行过程中的具体位置，可以被切面（Aspect）拦截并注入相应的增强逻辑。</p>
<p>当切入点表达式匹配到一个被 AOP 管理的类的方法时，这些方法就被认为是 <strong>连接点（Join Points）</strong>。</p>
<hr>
<p>@Before(“execution(* Calculator.add(..))”)</p>
<p>通知+切入点</p>
<p>代表了 Calculator类的add方法上执行增强操作</p>
<p>案例代码</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> &#123;<br><span class="hljs-comment">//连接点</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> a + b;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">divide</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> a / b;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Aspect</span><span class="hljs-comment">//切面</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingAspect</span> &#123;<br><br>    <span class="hljs-meta">@Before(&quot;execution(* Calculator.add(..))&quot;)</span><br>    <span class="hljs-comment">///通知 切入点 </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logBeforeAdd</span><span class="hljs-params">(JoinPoint joinPoint)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Logging before the add method is called&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@After(&quot;execution(* Calculator.divide(..))&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfterDivide</span><span class="hljs-params">(JoinPoint joinPoint)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Logging after the divide method is called&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">&lt;aop:aspectj-autoproxy/&gt;<br>&lt;<span class="hljs-keyword">context</span>:<span class="hljs-keyword">component</span>-scan base-<span class="hljs-keyword">package</span>=<span class="hljs-string">&quot;com.example&quot;</span>/&gt;<br></code></pre></td></tr></table></figure>

<h5 id="2-Aop进阶"><a href="#2-Aop进阶" class="headerlink" title="2.Aop进阶"></a>2.Aop进阶</h5><h6 id="1-通知类型"><a href="#1-通知类型" class="headerlink" title="1.通知类型"></a>1.通知类型</h6><ol>
<li><p>前置通知（Before Advice）：在目标方法执行之前调用通知方法。</p>
<p>对应注解：<code>@Before</code></p>
</li>
<li><p>后置通知（After Returning Advice）：在目标方法成功执行之后调用通知方法。</p>
<p>对应注解：<code>@AfterReturning</code></p>
</li>
<li><p>后置异常通知（After Throwing Advice）：在目标方法抛出异常后调用通知方法。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@AfterThrowing</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>后置通知（After (finally) Advice）：无论目标方法是否成功执行，都会调用通知方法。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-meta">@After</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>环绕通知（Around Advice）：在目标方法之前和之后执行通知方法，可以控制目标方法的执行过程。</p>
<p>对应注解：<code>@Around</code></p>
</li>
<li><p>引入通知（Introduction Advice）：向现有的对象添加新的方法或属性。</p>
</li>
<li><p>织入通知（AspectJ Advice）：在AOP中指定切点和通知的组合。</p>
</li>
</ol>
<hr>
<p>案例</p>
<ol>
<li><p>前置通知（Before Advice）：在用户进行结账操作时，检查用户的权限，确保用户具有足够的权限进行结账操作。</p>
</li>
<li><p>后置通知（After Returning Advice）：在用户提交订单成功后，记录订单信息到日志中，或者发送确认邮件给用户。</p>
</li>
<li><p>后置异常通知（After Throwing Advice）：如果订单处理过程中出现异常，比如库存不足，就发送通知给相关人员进行处理。</p>
</li>
<li><p>后置最终通知（After (finally) Advice）：无论订单处理成功与否，都需要关闭数据库连接或释放其他资源。</p>
</li>
<li><p>环绕通知（Around Advice）：在处理订单之前和之后记录订单处理时间，以及性能监控等功能。</p>
</li>
<li><p>引入通知（Introduction Advice）：向订单类引入一个新的接口，比如可追踪变更历史的接口。</p>
</li>
<li><p>织入通知（AspectJ Advice）：定义一个切面，将上述的各种通知类型织入到订单处理的流程中。</p>
</li>
</ol>
<p>import org.aspectj.lang.annotation.Aspect;<br>import org.aspectj.lang.annotation.Before;<br>import org.aspectj.lang.annotation.AfterReturning;<br>import org.aspectj.lang.annotation.AfterThrowing;<br>import org.aspectj.lang.annotation.After;<br>import org.aspectj.lang.annotation.Around;<br>import org.aspectj.lang.ProceedingJoinPoint;</p>
<p>@Aspect<br>public class LoggingAspect {</p>
<pre><code class="hljs">@Before(&quot;execution(* com.example.service.OrderService.processOrder(..))&quot;)
public void beforeProcessOrder() &#123;
    System.out.println(&quot;Before processing order...&quot;);
&#125;

@AfterReturning(pointcut = &quot;execution(* com.example.service.OrderService.processOrder(..))&quot;, returning = &quot;result&quot;)
public void afterProcessOrder(Object result) &#123;
    System.out.println(&quot;After processing order. Result: &quot; + result);
&#125;

@AfterThrowing(pointcut = &quot;execution(* com.example.service.OrderService.processOrder(..))&quot;, throwing = &quot;exception&quot;)
public void afterThrowingProcessOrder(Exception exception) &#123;
    System.out.println(&quot;Exception thrown during order processing: &quot; + exception.getMessage());
&#125;

@After(&quot;execution(* com.example.service.OrderService.processOrder(..))&quot;)
public void afterProcessOrderCompletion() &#123;
    System.out.println(&quot;After processing order completion...&quot;);
&#125;

@Around(&quot;execution(* com.example.service.OrderService.processOrder(..))&quot;)
public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable &#123;
    long startTime = System.currentTimeMillis();
    Object result = joinPoint.proceed();
    long endTime = System.currentTimeMillis();
    System.out.println(&quot;Order processing time: &quot; + (endTime - startTime) + &quot; milliseconds&quot;);
    return result;
&#125;
</code></pre>
<h6 id="2-通知顺序"><a href="#2-通知顺序" class="headerlink" title="2.通知顺序"></a>2.通知顺序</h6><p>当多个切面匹配到同一个类时，可以按照切入点所在类的字母顺序来决定通知方法的执行顺序</p>
<p>1.类字母</p>
<p>按照匹配到的切入点的类字母决定先后顺讯</p>
<p>1.前置-字母排名靠前的先执行</p>
<p>2.后置-字母排名靠前的后执行</p>
<p>2.@Order</p>
<p>可以使用<code>@Order</code>注解来控制多个通知方法的执行顺序。通过<code>@Order</code>注解可以指定通知方法的执行顺序，数值越小的通知方法优先执行。</p>
<p>具体步骤如下：</p>
<ol>
<li>在定义通知方法的类上添加<code>@Component</code>或其他相关注解，使其成为Spring容器中的Bean。</li>
<li>在通知方法上添加<code>@Order</code>注解，并指定执行顺序的数值，数值越小优先级越高。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAspect</span> &#123;<br><br>    <span class="hljs-meta">@Before(&quot;execution(* com.example.service.MyService.*(..))&quot;)</span><br>    <span class="hljs-meta">@Order(1)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeAdvice</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 前置通知的实现</span><br>    &#125;<br><br>    <span class="hljs-meta">@AfterReturning(&quot;execution(* com.example.service.MyService.*(..))&quot;)</span><br>    <span class="hljs-meta">@Order(2)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturningAdvice</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 后置通知的实现</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>目标前-数字小的先执行</p>
<p>目标后-数字小的后执行</p>
<h6 id="3-切入点"><a href="#3-切入点" class="headerlink" title="3.切入点"></a>3.切入点</h6><p>1.execution</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b0484d9f1bbe10d4207d84882472bf29.png" srcset="/img/loading.gif" lazyload alt="b0484d9f1bbe10d4207d84882472bf29"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e0a84ff1d8ccee34eb3876e12a63ef97.png" srcset="/img/loading.gif" lazyload alt="e0a84ff1d8ccee34eb3876e12a63ef97"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3ce5a2480e7eaf7f880d1624f4013487.png" srcset="/img/loading.gif" lazyload alt="3ce5a2480e7eaf7f880d1624f4013487"></p>
<h4 id="2-注解aop开发"><a href="#2-注解aop开发" class="headerlink" title="2.注解aop开发"></a>2.注解aop开发</h4><p>代码案例</p>
<p>首先，定义一个自定义注解<code>CustomAnnotation</code>：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Target</span>(ElementType.METHOD)<br><span class="hljs-comment">//@Target(ElementType.METHOD)：表示该注解可以用于方法上。这意味着CustomAnnotation只能用于方法的声明中，而不能用于其他地方，比如类、字段等。</span><br><span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)<br><span class="hljs-comment">///@Retention(RetentionPolicy.RUNTIME)：表示该注解在运行时可以被反射读取。这意味着在运行时，我们可以通过Java的反射机制来获取并处理带有CustomAnnotation注解的方法。</span><br>public <span class="hljs-variable">@interface</span> CustomAnnotation &#123;<br>    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">value</span>();<br>&#125;<br>这两个元数据的设定确保了<span class="hljs-selector-tag">CustomAnnotation</span>注解的使用方式和其在程序运行期间的可见性，使其可以被<span class="hljs-selector-tag">AOP</span>或其他机制所识别并进行相应的处理。<br></code></pre></td></tr></table></figure>

<p>接着，在一个服务类中使用<code>CustomAnnotation</code>注解：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-variable">@Service</span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyService</span> </span>&#123;<br><br>    <span class="hljs-variable">@CustomAnnotation</span>(<span class="hljs-string">&quot;Custom Annotation Example&quot;</span>)<br>    public void myMethod() &#123;<br>        <span class="hljs-regexp">//</span> 方法实现<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在<code>@CustomAnnotation(&quot;Custom Annotation Example&quot;)</code>这个注解中，双引号里面的参数是注解的属性值。在定义自定义注解时，可以为注解定义属性，并在使用注解时为这些属性赋值。</p>
<p>在这个示例中，自定义注解<code>CustomAnnotation</code>定义了一个名为<code>value</code>的属性，因此在使用这个注解时，需要为<code>value</code>属性赋值。双引号中的内容 <code>&quot;Custom Annotation Example&quot;</code> 就是为<code>value</code>属性赋的具体数值。</p>
<p>当在切面类中通过反射获取带有<code>CustomAnnotation</code>注解的方法时，可以通过访问注解的属性值来获取这里传入的参数值，从而实现根据不同的属性值执行不同的逻辑处理。</p>
<hr>
<p>然后，在切面类中使用<code>@annotation</code>注解匹配带有<code>CustomAnnotation</code>注解的方法：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Aspect</span><br>public class MyAspect &#123;<br><br>    <span class="hljs-variable">@Pointcut</span>(<span class="hljs-string">&quot;@annotation(customAnnotation)&quot;</span>)<br>    public void <span class="hljs-built_in">annotatedMethod</span>(CustomAnnotation customAnnotation) &#123;&#125;<br><br>    <span class="hljs-variable">@Before</span>(<span class="hljs-string">&quot;annotatedMethod(customAnnotation)&quot;</span>)<br>    public void <span class="hljs-built_in">beforeAnnotatedMethod</span>(CustomAnnotation customAnnotation) &#123;<br>        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;Before advice for method with custom annotation: &quot;</span> + customAnnotation.<span class="hljs-built_in">value</span>());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这个切入点表达式 <code>@annotation(customAnnotation)</code> 的作用是匹配所有被 <code>@CustomAnnotation</code> 注解标记的方法。</p>
<p><code>@annotation(customAnnotation)</code> 是 AspectJ 提供的一个语法，用来匹配方法级别的注解。这里，<code>customAnnotation</code> 是一个参数，它表示目标方法上使用的 <code>@CustomAnnotation</code>。</p>
<p>同时<code>annotatedMethod</code> f方法的主要用处是可以在通知（Advice）方法中使用一个更清晰、易读的命名标识来引用切入点。</p>
<hr>
<p><code>@Before(&quot;annotatedMethod(customAnnotation)&quot;)</code> 表示在所有匹配 <code>@annotation(customAnnotation)</code> 切入点的方法执行之前，执行 <code>beforeAnnotatedMethod</code> 这个方法。</p>
<p><code>beforeAnnotatedMethod</code> 方法将会在任何被 <code>@CustomAnnotation</code> 标记的方法执行之前运行。它可以访问这个自定义注解实例 <code>customAnnotation</code>，并获取该注解中的属性（例如 <code>value()</code> 方法）。</p>
<h6 id="4-连接点"><a href="#4-连接点" class="headerlink" title="4.连接点"></a>4.连接点</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c9a1881e71612ce58b920331bae4d304.png" srcset="/img/loading.gif" lazyload alt="c9a1881e71612ce58b920331bae4d304"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6ecb0785b0a6a59af4c08f919aeb6b9e.png" srcset="/img/loading.gif" lazyload alt="6ecb0785b0a6a59af4c08f919aeb6b9e"></p>
<h4 id="14-事务"><a href="#14-事务" class="headerlink" title="14.事务"></a>14.事务</h4><h6 id="0-事务的声明式管理"><a href="#0-事务的声明式管理" class="headerlink" title="0.事务的声明式管理"></a>0.事务的声明式管理</h6><p><strong>Spring 事务管理</strong> 依赖于 <strong>AOP 的思想和机制</strong> 来实现声明式事务管理。</p>
<p>在 Spring 中，当你使用 <code>@Transactional</code> 注解声明一个方法或类需要事务管理时，Spring AOP 会在运行时为这些方法或类创建一个代理对象（Proxy）。代理对象负责在方法调用之前开始事务，在方法调用之后提交或回滚事务。</p>
<p>Spring 使用 AOP 机制来织入事务管理代码。<code>@Transactional</code> 注解背后是通过 AOP 来实现的。在方法执行的前后，AOP 拦截器会自动进行事务管理操作（如事务开启、提交和回滚），而这些操作对业务代码是透明的。</p>
<p>这种方式被称为 <strong>声明式事务管理</strong>，它使用 <code>@Transactional</code> 注解指定哪些方法或类需要事务支持，不需要在业务代码中显式地编写事务处理逻辑。</p>
<p>切面</p>
<p>Spring 框架定义了一个 <strong>事务切面</strong>（Transaction Aspect），用来拦截被 <code>@Transactional</code> 标记的方法。这个切面是在方法调用前后执行相应的事务操作。</p>
<p>切入点</p>
<p>@Transactional</p>
<p>通知</p>
<p>通知逻辑</p>
<p>在方法执行前，事务切面拦截器会开启一个事务。</p>
<p>如果方法正常执行完成，则事务切面拦截器会提交事务。</p>
<p>如果方法执行过程中抛出了异常，事务切面拦截器会根据配置决定是回滚事务还是提交事务。</p>
<h6 id="1-事务入门-例子"><a href="#1-事务入门-例子" class="headerlink" title="1.事务入门 -例子"></a>1.事务入门 -例子</h6><p>假设我们有一个简单的用户管理系统，其中包括一个服务类 <code>UserService</code>，负责创建用户。我们希望在执行用户</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserRepository</span> userRepository;<br><br>    <span class="hljs-comment">// 被 @Transactional 注解的方法将由 Spring AOP 管理</span><br>    <span class="hljs-meta">@Transactional</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"><span class="hljs-title class_">String</span> username</span>) &#123;<br>        <span class="hljs-comment">// 保存用户</span><br>        userRepository.<span class="hljs-title function_">save</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(username));<br><br>        <span class="hljs-comment">// 模拟一个异常情况，测试事务回滚</span><br>        <span class="hljs-keyword">if</span> (username == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Username cannot be null&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br>----------<br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-title class_">String</span>[] args</span>) &#123;<br>        <span class="hljs-title class_">ApplicationContext</span> context = <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">Application</span>.<span class="hljs-property">class</span>, args);<br>        <span class="hljs-title class_">UserService</span> userService = context.<span class="hljs-title function_">getBean</span>(<span class="hljs-title class_">UserService</span>.<span class="hljs-property">class</span>);<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            userService.<span class="hljs-title function_">createUser</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// 将会导致事务回滚</span><br>        &#125; <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) &#123;<br>            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;Exception caught: &quot;</span> + e.<span class="hljs-title function_">getMessage</span>());<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h6 id="2-事务管理员-事务协调员"><a href="#2-事务管理员-事务协调员" class="headerlink" title="2.事务管理员 事务协调员"></a>2.事务管理员 事务协调员</h6><p>例子事务</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/342dd9a76057ac1992637973417a63c8.png" srcset="/img/loading.gif" lazyload alt="342dd9a76057ac1992637973417a63c8"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9b888313da273ab68bfb514f19274a0b.png" srcset="/img/loading.gif" lazyload alt="9b888313da273ab68bfb514f19274a0b"></p>
<h6 id="3-事务配置"><a href="#3-事务配置" class="headerlink" title="3.事务配置"></a>3.事务配置</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b6f65b886518d3736b235a310f1a6754.png" srcset="/img/loading.gif" lazyload alt="b6f65b886518d3736b235a310f1a6754"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/59d7f8499d23c0a2bcfdb780f1e00ea3.png" srcset="/img/loading.gif" lazyload alt="59d7f8499d23c0a2bcfdb780f1e00ea3"></p>
<h5 id="4-事务加入-规则"><a href="#4-事务加入-规则" class="headerlink" title="4.事务加入-规则"></a>4.事务加入-规则</h5><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/03f05df2aa222c9fb3abd3efb44ef699.png" srcset="/img/loading.gif" lazyload alt="03f05df2aa222c9fb3abd3efb44ef699"></p>
<p>例子</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5dde408db43ac7d09f859c76ed257c91.png" srcset="/img/loading.gif" lazyload alt="5dde408db43ac7d09f859c76ed257c91"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/fba20ae7cf0e8f32ff7aa3de0fb42e42.png" srcset="/img/loading.gif" lazyload alt="fba20ae7cf0e8f32ff7aa3de0fb42e42"></p>
<p>如图-都加入同一事务-一旦有异常-日志也会回滚</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9972f6f167883d144abc515733c62536.png" srcset="/img/loading.gif" lazyload alt="9972f6f167883d144abc515733c62536"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5f99a409d1ff453639c1d9cc7aa2fcf2.png" srcset="/img/loading.gif" lazyload alt="5f99a409d1ff453639c1d9cc7aa2fcf2"></p>
<p>解决</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/cf8e05d7e9f071a8464d78b45eab2ae5.png" srcset="/img/loading.gif" lazyload alt="cf8e05d7e9f071a8464d78b45eab2ae5"></p>
<h6 id="事务传播行为"><a href="#事务传播行为" class="headerlink" title="事务传播行为"></a>事务传播行为</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/fa818038f3cf6f80cf14608cec80c598.png" srcset="/img/loading.gif" lazyload alt="fa818038f3cf6f80cf14608cec80c598"></p>
<h4 id="0-1-Spring-整合mybatis"><a href="#0-1-Spring-整合mybatis" class="headerlink" title="0.1 Spring 整合mybatis"></a>0.1 Spring 整合mybatis</h4><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/11abe4ba3472982e3b1b217edb94c96e.png" srcset="/img/loading.gif" lazyload alt="11abe4ba3472982e3b1b217edb94c96e"></p>
<p>-&gt;将该注册为Bean</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e038210f851e6d054f2de5a40605d29c.png" srcset="/img/loading.gif" lazyload alt="e038210f851e6d054f2de5a40605d29c"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eb16bf7c1655375464b67dcd0194534b.png" srcset="/img/loading.gif" lazyload alt="eb16bf7c1655375464b67dcd0194534b"></p>
<p>如图–以上配置全部进行修改</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/241a0676f37e4b12a5eef8cdc8e7fe35.png" srcset="/img/loading.gif" lazyload alt="241a0676f37e4b12a5eef8cdc8e7fe35"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/79a9256b4115e3f74adcb4dfc1db5f30.png" srcset="/img/loading.gif" lazyload alt="79a9256b4115e3f74adcb4dfc1db5f30"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3ba320445dccb955e30224a3bbee6193.png" srcset="/img/loading.gif" lazyload alt="3ba320445dccb955e30224a3bbee6193"></p>
<p>收纳</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7ff11a9112a3615d298943a68b54e9d6.png" srcset="/img/loading.gif" lazyload alt="7ff11a9112a3615d298943a68b54e9d6"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/55cab2a9fb9c8def31581e7f33474ad0.png" srcset="/img/loading.gif" lazyload alt="55cab2a9fb9c8def31581e7f33474ad0"></p>
<h4 id="0-2-Spring整合测试"><a href="#0-2-Spring整合测试" class="headerlink" title="0.2 Spring整合测试"></a>0.2 Spring整合测试</h4><p>设定类运行器</p>
<p>整合spring运行器</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/6981732edb98c9b849ff758c5c4053c1.png" srcset="/img/loading.gif" lazyload alt="6981732edb98c9b849ff758c5c4053c1"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/spring/" class="category-chain-item">spring</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Spring框架</div>
      <div>http://example.com/2024/09/10/Spring复习/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年9月10日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/09/11/%E5%AD%97%E8%8A%82%E7%A0%81/" title="java字节码">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">java字节码</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/09/10/maven%E5%9F%BA%E7%A1%80/" title="maven笔记">
                        <span class="hidden-mobile">maven笔记</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createCssLink('https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.css')
      Fluid.utils.createScript('https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.js', function() {
        var options = Object.assign(
          {"serverURL":"https://abc.nixgou.cn/","path":"window.location.pathname","meta":["nick"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],"dark":"html[data-user-color-scheme=\"dark\"]","wordLimit":0,"pageSize":10},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        Waline.init(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          var imgSelector = '#waline .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
