

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://q.qlogo.cn/headimg_dl?dst_uin=819429207&amp;spec=640&amp;img_type=jpg">
  <link rel="icon" href="https://q.qlogo.cn/headimg_dl?dst_uin=819429207&amp;spec=640&amp;img_type=jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="微服务01 总结-认识微服务-单体-微服务springcloude微服务拆分原则RestTemplate服务注册 发现 注册中心nacosopenFeignopenFeign连接池替换aip思路 微服务了解1.微服务和单体服务区别单体架构-项目的文件都在同一个工程中开发-项目部署简单但是团队协作不好分工系统发布效率低系统可用性差-无分布式效果-导致功能之间相互影响大  微服务原则单一职责-一个微服">
<meta property="og:type" content="article">
<meta property="og:title" content="微服务Spring Cloude">
<meta property="og:url" content="http://example.com/2024/09/20/%E5%BE%AE%E6%9C%8D%E5%8A%A101/index.html">
<meta property="og:site_name" content="逆向狗">
<meta property="og:description" content="微服务01 总结-认识微服务-单体-微服务springcloude微服务拆分原则RestTemplate服务注册 发现 注册中心nacosopenFeignopenFeign连接池替换aip思路 微服务了解1.微服务和单体服务区别单体架构-项目的文件都在同一个工程中开发-项目部署简单但是团队协作不好分工系统发布效率低系统可用性差-无分布式效果-导致功能之间相互影响大  微服务原则单一职责-一个微服">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/%E5%BE%AE%E6%9C%8D%E5%8A%A1Springcloude.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/da4945c334b905363d17af697d049ab0.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/44368b18c4a6590fc1de4c06feb8ffd0.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a901f2f7901587696846615aaf0ef1eb.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/894106143910c2cbb7708074f9256b47.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8ef363e77fbcac43b74e31bea4ea42e4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e7c61f69d70066c2f618e3b78b5ab0ea.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/354729fe5f6622042462ec267dae5a42.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/38aa2eb16283ccac08085d7a12d3a698.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/905b852bbe9e52b6c85f8ef4b220e33e.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2382bee1bde9f36e4701b2bf0c9986dd.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/4c2ae85d3e2a4b4c39a8d840d28d3016.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5287cf7a27091d5968a3b9b76965f182.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/152860dce440d1d9e73f5ef0c6818808.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1ab667da96d404a3693f73e8f3e61dbd.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/95c8c6bd4312301e08eb279ca19c6f72.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b00650836cc74d97154f0c19e0885e3b.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/cc0c30e1121009042204d4d6e490b1a0.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8199919e0d3bd8725cdbd299ff19a5db.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0a7daefd898024466d28967eea99da8c.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e73d3e068484e2e31915ba7653f1003c.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e73d3e068484e2e31915ba7653f1003c.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0ed643292f8dcdbb4ff4d6e96ce00153.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8241cb4042ea1e687948cd9b6c752e4b.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d0853161a442680c814a26edfd25d44b.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2f85cd781db72ba5994a9b7341f64c2f.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/76f1f3f63bb3b8d05dc723f7f12117a2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/670ebe6e23b9c09af17b4f1e53a3f249.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/814cd85a1c02b2c0d6fcb82731791e49.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/33c9a08d518a78765fcfda164468e9ed.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e602e00dfea1425d97903200ab20744d.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/906530d2a10b4728e2e15ef674b795ab.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eba4edc2810d7f0f0c3a6af446baf9c6.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a10173c12662023f3b425ef0fa1cf022.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d7f0640d795ce3dfac74f1cd2921f308.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8462748af036d85d5789334d705224cc.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c715d9286b13c80bef8c74b434f3eabc.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/88ec0600e28b2a9d0ca37d52cefc3d1f.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1f41d6a93c5a68ed3df317daf479a836.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7fe049b96c1496d2914d63fb65f8a192.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a4e216499c59db0b068a2d2adcfb6344.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b8745f34d893608b923694068caa317a.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9d50e713326b10f6cbc455e35ac9982.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21423572850708f447c70112b71b58fe.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/4715d2573fb1cca2b0ad7ffd60d4cf77.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/036abaa6e3c3efa4258a1ebb6a9a3f74.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5e22d64051c12080b52e137b3f2df8d1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c302ab029433076c8f27b8b744e77da4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/788621b778db5d0475a1459c7f47f2ef.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/34f7f37b9b9c8cd0cf8312e5f077eeb4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c7b8cd24915878d194e94777d1dc125c.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9ab61eb239f97e8060fb49f7e71f0e1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/bb27fd15744a4ce0dbbebcec3c82fded.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7bd5b3ef60ef4f21a05d38e55b3c9c97.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/247218cd325db9d0990af715191c506f.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0fccbe790ea662f50e4dc78e637dfeb9.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eb2704aaff009260682661686d43a863.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3834ba9c13d5c8765637fa028b2d2540.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1be7a5e7b5ff63918edfb6a98a4df1e8.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21dbf7eb235492bb336c2ee5a9b1d495.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9283c00f8a1b26caba5a8ea4a7d47102.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/814cd85a1c02b2c0d6fcb82731791e49.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/33c9a08d518a78765fcfda164468e9ed.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e602e00dfea1425d97903200ab20744d.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/906530d2a10b4728e2e15ef674b795ab.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eba4edc2810d7f0f0c3a6af446baf9c6.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a10173c12662023f3b425ef0fa1cf022.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d7f0640d795ce3dfac74f1cd2921f308.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8462748af036d85d5789334d705224cc.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c715d9286b13c80bef8c74b434f3eabc.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/88ec0600e28b2a9d0ca37d52cefc3d1f.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1f41d6a93c5a68ed3df317daf479a836.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7fe049b96c1496d2914d63fb65f8a192.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a4e216499c59db0b068a2d2adcfb6344.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b8745f34d893608b923694068caa317a.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9d50e713326b10f6cbc455e35ac9982.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21423572850708f447c70112b71b58fe.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/4715d2573fb1cca2b0ad7ffd60d4cf77.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/036abaa6e3c3efa4258a1ebb6a9a3f74.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5e22d64051c12080b52e137b3f2df8d1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c302ab029433076c8f27b8b744e77da4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/788621b778db5d0475a1459c7f47f2ef.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/34f7f37b9b9c8cd0cf8312e5f077eeb4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c7b8cd24915878d194e94777d1dc125c.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9ab61eb239f97e8060fb49f7e71f0e1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/bb27fd15744a4ce0dbbebcec3c82fded.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7bd5b3ef60ef4f21a05d38e55b3c9c97.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/247218cd325db9d0990af715191c506f.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0fccbe790ea662f50e4dc78e637dfeb9.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eb2704aaff009260682661686d43a863.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3834ba9c13d5c8765637fa028b2d2540.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1be7a5e7b5ff63918edfb6a98a4df1e8.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21dbf7eb235492bb336c2ee5a9b1d495.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9283c00f8a1b26caba5a8ea4a7d47102.png">
<meta property="article:published_time" content="2024-09-20T12:22:30.000Z">
<meta property="article:modified_time" content="2024-09-20T08:50:53.608Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Xlan-cell/tupian/master/%E5%BE%AE%E6%9C%8D%E5%8A%A1Springcloude.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>微服务Spring Cloude - 逆向狗</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>逆向狗</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://s1.locimg.com/2024/09/06/63bc048e8a257.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="微服务Spring Cloude"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        John Doe
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-09-20 20:22" pubdate>
          2024年9月20日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.5k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          38 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">微服务Spring Cloude</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="微服务01"><a href="#微服务01" class="headerlink" title="微服务01"></a>微服务01</h1><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/%E5%BE%AE%E6%9C%8D%E5%8A%A1Springcloude.png" srcset="/img/loading.gif" lazyload alt="微服务Springcloude"></p>
<p>总结-<br>认识微服务-单体-微服务<br>springcloude<br>微服务拆分原则<br>RestTemplate<br>服务注册 发现 注册中心<br>nacos<br>openFeign<br>openFeign连接池替换<br>aip思路</p>
<h4 id="微服务了解"><a href="#微服务了解" class="headerlink" title="微服务了解"></a>微服务了解</h4><h6 id="1-微服务和单体服务区别"><a href="#1-微服务和单体服务区别" class="headerlink" title="1.微服务和单体服务区别"></a>1.微服务和单体服务区别</h6><p>单体架构-项目的文件都在同一个工程中开发-项目部署简单<br>但是<br>团队协作不好分工<br>系统发布效率低<br>系统可用性差-无分布式效果-导致功能之间相互影响大</p>
<hr>
<p>微服务原则<br>单一职责-一个微服务辅助一部分业务功能-核心数据不依赖其他模块<br>团队自治-每个微服务都有独立的开发测试人员<br>服务自治-每个微服务独立部署</p>
<hr>
<ul>
<li>团队协作成本高？</li>
<li>系统发布效率低？</li>
<li>系统可用性差？</li>
</ul>
<h6 id="2-SpringCloude"><a href="#2-SpringCloude" class="headerlink" title="2.SpringCloude"></a>2.SpringCloude</h6><p>SpringCloud框架是Java领域的微服务组件的集合。</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/da4945c334b905363d17af697d049ab0.png" srcset="/img/loading.gif" lazyload alt="da4945c334b905363d17af697d049ab0"></p>
<p>SpringCloud依托于SpringBoot的自动装配能力，大大降低了其项目搭建、组件使用的成本</p>
<p>Spring Cloud 是在 Spring Boot 之上构建的一组工具和框架，主要用于解决分布式系统中的常见问题，如服务注册与发现、负载均衡、配置管理、断路器等。它提供了一整套微服务架构下的解决方案。</p>
<h6 id="3-微服务拆分原则"><a href="#3-微服务拆分原则" class="headerlink" title="3.微服务拆分原则"></a>3.微服务拆分原则</h6><ul>
<li><p>什么时候拆？</p>
</li>
<li><p>如何拆？<br>大多数小型项目来说，一般是先采用单体架构，随着用户规模扩大、业务复杂后再逐渐拆分为微服务架构。</p>
</li>
<li><p>高内聚：每个微服务的职责要尽量单一，包含的业务相互关联度高、完整度高。</p>
</li>
<li><p>低耦合：每个微服务的功能要相对独立，尽量减少对其它微服务的依赖，或者依赖接口的稳定性要强。</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/44368b18c4a6590fc1de4c06feb8ffd0.png" srcset="/img/loading.gif" lazyload alt="44368b18c4a6590fc1de4c06feb8ffd0"></p>
<ul>
<li>纵向拆分<br>就是按照项目的功能模块来拆分。<br>例如黑马商城中，就有用户管理功能、订单管理功能、。按照功能模块将他们拆分为一个个服务，就属于纵向拆分。这种拆分模式可以尽可能提高服务的内聚性。</li>
<li>横向拆分<br>各个功能模块之间有没有公共的业务部分，如果有将其抽取出来作为通用服务。<br>例如用户登录是需要发送消息通知，记录风控数据，下单时也要发送短信，记录风控数据。因此消息发送、风控数据记录就是通用的业务功能，因此可以将他们分别抽取为公共服务：消息中心服务、风控管理服务。这样可以提高业务的复用性，避免重复开发。同时通用业务一般接口稳定性较强，也不会使服务之间过分耦合。</li>
</ul>
<h6 id="4-微服务拆分"><a href="#4-微服务拆分" class="headerlink" title="4.微服务拆分"></a>4.微服务拆分</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a901f2f7901587696846615aaf0ef1eb.png" srcset="/img/loading.gif" lazyload alt="a901f2f7901587696846615aaf0ef1eb"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/894106143910c2cbb7708074f9256b47.png" srcset="/img/loading.gif" lazyload alt="894106143910c2cbb7708074f9256b47"></p>
<h4 id="springcloude技术栈"><a href="#springcloude技术栈" class="headerlink" title="springcloude技术栈"></a>springcloude技术栈</h4><h4 id="1-远程调用"><a href="#1-远程调用" class="headerlink" title="1.远程调用"></a>1.远程调用</h4><h6 id="0-场景"><a href="#0-场景" class="headerlink" title="0.场景"></a>0.场景</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8ef363e77fbcac43b74e31bea4ea42e4.png" srcset="/img/loading.gif" lazyload alt="8ef363e77fbcac43b74e31bea4ea42e4"></p>
<p>itmservice.chaxun(id);-&gt;改为远程调用</p>
<h6 id="1-RestTemplate"><a href="#1-RestTemplate" class="headerlink" title="1.RestTemplate"></a>1.RestTemplate</h6><p>同步客户端执行HTTP请求</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e7c61f69d70066c2f618e3b78b5ab0ea.png" srcset="/img/loading.gif" lazyload alt="e7c61f69d70066c2f618e3b78b5ab0ea"></p>
<p>使用</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/354729fe5f6622042462ec267dae5a42.png" srcset="/img/loading.gif" lazyload alt="354729fe5f6622042462ec267dae5a42"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/38aa2eb16283ccac08085d7a12d3a698.png" srcset="/img/loading.gif" lazyload alt="38aa2eb16283ccac08085d7a12d3a698"></p>
<p>可以看到，利用RestTemplate发送http请求与前端ajax发送请求非常相似，都包含四部分信息：</p>
<ul>
<li><p>① 请求方式</p>
</li>
<li><p>② 请求路径</p>
</li>
<li><p>③ 请求参数<br>返回值类型</p>
</li>
</ul>
<p>缺点<br><strong>负载均衡麻烦-无法指定请求路径</strong><br><strong>-我们就需要一个注册中心-帮我们收集实例-当访问对应就给与一个</strong></p>
<hr>
<h4 id="Nacos-注册中心"><a href="#Nacos-注册中心" class="headerlink" title="Nacos-注册中心"></a>Nacos-注册中心</h4><h6 id="0-了解nacos"><a href="#0-了解nacos" class="headerlink" title="0.了解nacos"></a>0.了解nacos</h6><p><strong>Nacos</strong> 是阿里巴巴开源的一款用于动态服务发现、配置管理和服务管理的工具，主要用于微服务架构中的服务治理。它的核心目标是简化分布式系统中的服务注册、服务发现和配置管理，并提供一站式解决方案。</p>
<p>Nacos 是一个面向微服务架构的服务治理平台，它的主要作用包括：</p>
<ul>
<li><strong>动态服务注册与发现</strong>，帮助微服务自动化发现其他服务。</li>
<li><strong>配置管理</strong>，提供了强大的配置存储、版本控制、动态刷新功能，提升了微服务架构下的配置灵活性。</li>
<li><strong>健康检查</strong>，保障服务的高可用性和故障隔离能力。</li>
</ul>
<h5 id="1-注册中心入门"><a href="#1-注册中心入门" class="headerlink" title="1.注册中心入门"></a>1.注册中心入门</h5><ul>
<li><p>服务提供者：提供接口供其它微服务访问，比如item-service</p>
</li>
<li><p>服务消费者：调用其它微服务提供的接口，比如cart-service</p>
</li>
</ul>
<p>为了管理这些服务·务消费者三者间关系如下：</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/905b852bbe9e52b6c85f8ef4b220e33e.png" srcset="/img/loading.gif" lazyload alt="905b852bbe9e52b6c85f8ef4b220e33e"></p>
<h6 id="2-注册中心配置-Docker"><a href="#2-注册中心配置-Docker" class="headerlink" title="2.注册中心配置-Docker"></a>2.注册中心配置-Docker</h6><p>1.导入nacos表</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2382bee1bde9f36e4701b2bf0c9986dd.png" srcset="/img/loading.gif" lazyload alt="2382bee1bde9f36e4701b2bf0c9986dd"></p>
<p>2.修改配置文件</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/4c2ae85d3e2a4b4c39a8d840d28d3016.png" srcset="/img/loading.gif" lazyload alt="4c2ae85d3e2a4b4c39a8d840d28d3016"></p>
<p>3.<img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5287cf7a27091d5968a3b9b76965f182.png" srcset="/img/loading.gif" lazyload alt="5287cf7a27091d5968a3b9b76965f182"></p>
<h6 id="2-注册中心配置-spring-cloude"><a href="#2-注册中心配置-spring-cloude" class="headerlink" title="2.注册中心配置-spring cloude"></a>2.注册中心配置-spring cloude</h6><p>服务注册</p>
<p>1.引入依赖<br>2.配置nacos地址<br>3.重启</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/152860dce440d1d9e73f5ef0c6818808.png" srcset="/img/loading.gif" lazyload alt="152860dce440d1d9e73f5ef0c6818808"></p>
<p>在nacos的服务列表中即可看到</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1ab667da96d404a3693f73e8f3e61dbd.png" srcset="/img/loading.gif" lazyload alt="1ab667da96d404a3693f73e8f3e61dbd"></p>
<p>服务发现<br>1.引入依赖</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/95c8c6bd4312301e08eb279ca19c6f72.png" srcset="/img/loading.gif" lazyload alt="95c8c6bd4312301e08eb279ca19c6f72"></p>
<p>2.配置nacos</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b00650836cc74d97154f0c19e0885e3b.png" srcset="/img/loading.gif" lazyload alt="b00650836cc74d97154f0c19e0885e3b"></p>
<p>3.发现调用服务<br>负载均衡调用服务选择<br>随机-轮训-ip的hash-最少访问</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/cc0c30e1121009042204d4d6e490b1a0.png" srcset="/img/loading.gif" lazyload alt="cc0c30e1121009042204d4d6e490b1a0"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8199919e0d3bd8725cdbd299ff19a5db.png" srcset="/img/loading.gif" lazyload alt="8199919e0d3bd8725cdbd299ff19a5db"></p>
<p>但是代码还是非常嘈杂以及难看-</p>
<h4 id="OpenFeign-远程调用"><a href="#OpenFeign-远程调用" class="headerlink" title="OpenFeign-远程调用"></a>OpenFeign-远程调用</h4><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0a7daefd898024466d28967eea99da8c.png" srcset="/img/loading.gif" lazyload alt="0a7daefd898024466d28967eea99da8c"></p>
<h6 id="1-快速入门案例"><a href="#1-快速入门案例" class="headerlink" title="1.快速入门案例"></a>1.快速入门案例</h6><p>1.导入案例</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e73d3e068484e2e31915ba7653f1003c.png" srcset="/img/loading.gif" lazyload alt="e73d3e068484e2e31915ba7653f1003c"></p>
<p>2.启动注解</p>
<p>快速入门案例 1.导入案例</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e73d3e068484e2e31915ba7653f1003c.png" srcset="/img/loading.gif" lazyload alt="img"><br>2.启动注解</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0ed643292f8dcdbb4ff4d6e96ce00153.png" srcset="/img/loading.gif" lazyload alt="img"><br>3.代码编写</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8241cb4042ea1e687948cd9b6c752e4b.png" srcset="/img/loading.gif" lazyload alt="8241cb4042ea1e687948cd9b6c752e4b"></p>
<p>private final ItemClient itemclient;<br>List&lt;&gt;items&#x3D;itemclient.query();</p>
<p>如上feign帮我们进行了 <strong>服务拉取 负载均衡 -请发送的所有工作</strong></p>
<h6 id="2-OpenFeign连接池"><a href="#2-OpenFeign连接池" class="headerlink" title="2.OpenFeign连接池"></a>2.OpenFeign连接池</h6><p>我们发起请求的话-需要建立连接-再销毁-但连接池可以减少这个过程产生的消耗<br>使用ok-http连接池<br>1.导入依赖<br>2.配置启用</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d0853161a442680c814a26edfd25d44b.png" srcset="/img/loading.gif" lazyload alt="d0853161a442680c814a26edfd25d44b"></p>
<p>OkHttp连接池的操作如下：</p>
<pre><code class="hljs">连接的创建和管理: OkHttp连接池会在应用程序启动时创建一组HTTP连接，并在需要时将其保持在连接池中。这些连接可以被多个线程共享和重用，而不是每次请求都重新创建连接。

连接的重用: 当一个线程需要执行一个HTTP请求时，它可以从连接池中获取一个可用的连接，而不必等待新连接的创建。如果连接池中没有可用的连接，线程可能会被阻塞，直到有连接可用为止。

连接的释放: 当一个线程完成了对某个HTTP服务的请求，它会将连接放回连接池，而不是关闭连接。这样可以避免频繁地打开和关闭连接，提高了连接的重用率。
</code></pre>
<p>OkHttp连接池可以加快效率的原因包括：</p>
<pre><code class="hljs">减少连接的创建和销毁开销：通过重用连接，可以避免频繁地创建和销毁连接，从而减少了系统资源的消耗和网络延迟。

提高并发性能：连接池可以确保连接的有效重用，从而使多个线程能够并发地共享同一个连接，提高了系统的并发处理能力。

降低网络延迟：通过重用连接和减少连接的创建次数，可以减少网络请求的等待时间，从而降低了网络延迟，提高了系统的响应速度。
</code></pre>
<p>总的来说，OkHttp连接池的有效管理和重用HTTP连接可以显著提高应用程序的性能和效率，特别是在需要频繁进行HTTP通信的场景下。</p>
<p>这里的请求-是固定的 故此可以保存</p>
<h6 id="3-api抽取"><a href="#3-api抽取" class="headerlink" title="3.api抽取"></a>3.api抽取</h6><p>方案1 结构层次低-耦合度高<br>方案2 结构层次复杂-哦合度低<img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/2f85cd781db72ba5994a9b7341f64c2f.png" srcset="/img/loading.gif" lazyload alt="2f85cd781db72ba5994a9b7341f64c2f"></p>
<h6 id="包扫描问题"><a href="#包扫描问题" class="headerlink" title="包扫描问题"></a>包扫描问题</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/76f1f3f63bb3b8d05dc723f7f12117a2.png" srcset="/img/loading.gif" lazyload alt="76f1f3f63bb3b8d05dc723f7f12117a2"></p>
<p>也是注册为bean-但我忘记常量注入了</p>
<h6 id="fegin日志配置"><a href="#fegin日志配置" class="headerlink" title="fegin日志配置"></a>fegin日志配置</h6><p>![2e098ace474e1339c04dd1aa450c100b](G:\360MoveData\Users\nixg\Documents\Tencent Files\2760045743\nt_qq\nt_data\Pic\2024-05\Ori\2e098ace474e1339c04dd1aa450c100b.png)</p>
<p>修改日志</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/670ebe6e23b9c09af17b4f1e53a3f249.png" srcset="/img/loading.gif" lazyload alt="670ebe6e23b9c09af17b4f1e53a3f249"></p>
<h1 id="微服务02"><a href="#微服务02" class="headerlink" title="微服务02"></a>微服务02</h1><p>网关过滤器-全局-和指定-&gt;网关登录鉴权-&gt;</p>
<p>微服务到微服务-&gt;Feing拦截器</p>
<p>naocs-&gt;配置共享 -配置热更新-动态路由</p>
<h2 id="Getway网关"><a href="#Getway网关" class="headerlink" title="Getway网关"></a>Getway网关</h2><h6 id="1-网关了解"><a href="#1-网关了解" class="headerlink" title="1.网关了解"></a>1.网关了解</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/814cd85a1c02b2c0d6fcb82731791e49.png" srcset="/img/loading.gif" lazyload alt="814cd85a1c02b2c0d6fcb82731791e49"></p>
<h6 id="2-SpringGetWay网关"><a href="#2-SpringGetWay网关" class="headerlink" title="2.SpringGetWay网关"></a>2.SpringGetWay网关</h6><p>1.创建网关微服务<br>2.引入依赖<br>3.编写启动类<br>4.配置网关路由</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/33c9a08d518a78765fcfda164468e9ed.png" srcset="/img/loading.gif" lazyload alt="33c9a08d518a78765fcfda164468e9ed"></p>
<p>配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e602e00dfea1425d97903200ab20744d.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>规则合集</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/906530d2a10b4728e2e15ef674b795ab.png" srcset="/img/loading.gif" lazyload alt="906530d2a10b4728e2e15ef674b795ab"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eba4edc2810d7f0f0c3a6af446baf9c6.png" srcset="/img/loading.gif" lazyload alt="eba4edc2810d7f0f0c3a6af446baf9c6"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a10173c12662023f3b425ef0fa1cf022.png" srcset="/img/loading.gif" lazyload alt="a10173c12662023f3b425ef0fa1cf022"></p>
<h6 id="3-网关登录鉴权"><a href="#3-网关登录鉴权" class="headerlink" title="3.网关登录鉴权"></a>3.网关登录鉴权</h6><p>登录思路-很多敏感思路都需要鉴权-我们又不可能重复写鉴权代码<br>故此网关思路即可<br>既然网关是所有微服务的入口，一切请求都需要先经过网关。我们完全可以把登录校验的工作放到网关去做，这样之前说的问题就解决了：</p>
<ul>
<li>只需要在网关和用户服务保存秘钥</li>
<li>只需要在网关开发登录校验功能</li>
<li></li>
</ul>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d7f0640d795ce3dfac74f1cd2921f308.png" srcset="/img/loading.gif" lazyload alt="d7f0640d795ce3dfac74f1cd2921f308"></p>
<p>1.网关传递用户信息-加信息头<br>2.服务直接传递信息-&gt;加信息头</p>
<h3 id="网关过滤器"><a href="#网关过滤器" class="headerlink" title="网关过滤器"></a>网关过滤器</h3><h6 id="1-过滤器了解"><a href="#1-过滤器了解" class="headerlink" title="1.过滤器了解"></a>1.过滤器了解</h6><p>网关的请求转发-由于getway实现<br>具体实现</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8462748af036d85d5789334d705224cc.png" srcset="/img/loading.gif" lazyload alt="8462748af036d85d5789334d705224cc"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c715d9286b13c80bef8c74b434f3eabc.png" srcset="/img/loading.gif" lazyload alt="c715d9286b13c80bef8c74b434f3eabc"></p>
<p>定义一个网关过滤器<br>进行登录逻辑判断-&gt;再Nett….之前</p>
<p>网关过滤器<br>1.路由过滤器 GatewayFilter指定规则<br>2.全局过滤器 GlobalFilter 全局规则</p>
<p>过滤器链之外还有一种过滤器，HttpHeadersFilter，用来处理传递到下游微服务的请求头。</p>
<p>FilteringWebHandeler处理会将全局-装饰为路由-放到同一过滤器链中<br>依次执行</p>
<p>spring cloude<br>指定的 路由过滤器<br><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories">https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories</a></p>
<h6 id="2-内置过滤器"><a href="#2-内置过滤器" class="headerlink" title="2.内置过滤器"></a>2.内置过滤器</h6><p>gateway内置的GatewayFilter过滤器使用起来非常简单，无需编码，只要在yaml文件中简单配置即可。而且其作用范围也很灵活，配置在哪个Route下，就作用于哪个Route.</p>
<p>AddRequestHeaderGatewayFilterFacotry<br>使用配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/88ec0600e28b2a9d0ca37d52cefc3d1f.png" srcset="/img/loading.gif" lazyload alt="88ec0600e28b2a9d0ca37d52cefc3d1f"></p>
<h6 id="3-网关路由器-GatewayFilter"><a href="#3-网关路由器-GatewayFilter" class="headerlink" title="3.网关路由器 GatewayFilter"></a>3.网关路由器 GatewayFilter</h6><p>自定义GatewayFilter不是直接实现GatewayFilter，而是实现AbstractGatewayFilterFactory</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1f41d6a93c5a68ed3df317daf479a836.png" srcset="/img/loading.gif" lazyload alt="1f41d6a93c5a68ed3df317daf479a836"></p>
<p>该类的名称一定要以GatewayFilterFactory为后缀！</p>
<p>spring:<br>  cloud:<br>    gateway:<br>      default-filters:<br>            - PrintAny # 此处直接以自定义的GatewayFilterFactory类名称前缀类声明过滤器</p>
<h6 id="4-动态配置参数-GatewayFilter"><a href="#4-动态配置参数-GatewayFilter" class="headerlink" title="4.动态配置参数 GatewayFilter"></a>4.动态配置参数 GatewayFilter</h6><p>过滤器动态配置参数</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7fe049b96c1496d2914d63fb65f8a192.png" srcset="/img/loading.gif" lazyload alt="7fe049b96c1496d2914d63fb65f8a192"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a4e216499c59db0b068a2d2adcfb6344.png" srcset="/img/loading.gif" lazyload alt="a4e216499c59db0b068a2d2adcfb6344"></p>
<h6 id="5-全局过滤器-GlobalFilter"><a href="#5-全局过滤器-GlobalFilter" class="headerlink" title="5.全局过滤器 GlobalFilter"></a>5.全局过滤器 GlobalFilter</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b8745f34d893608b923694068caa317a.png" srcset="/img/loading.gif" lazyload alt="b8745f34d893608b923694068caa317a"></p>
<h4 id="案例-网关登录鉴权"><a href="#案例-网关登录鉴权" class="headerlink" title="案例 -网关登录鉴权"></a>案例 -网关登录鉴权</h4><p>登录效验编写-<br>思路<br>全局过滤器中-对jwt进行解析-同时解析完毕将信息构造请求头中-以待微服务拿取-<br>如果解析失败-就直接返回</p>
<h6 id="1-网关拦截-转user-传递到请求头中"><a href="#1-网关拦截-转user-传递到请求头中" class="headerlink" title="1.网关拦截-转user-&gt;传递到请求头中"></a>1.网关拦截-转user-&gt;传递到请求头中</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9d50e713326b10f6cbc455e35ac9982.png" srcset="/img/loading.gif" lazyload alt="d9d50e713326b10f6cbc455e35ac9982"></p>
<h6 id="2-网关到微服务"><a href="#2-网关到微服务" class="headerlink" title="2.网关到微服务"></a>2.网关到微服务</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21423572850708f447c70112b71b58fe.png" srcset="/img/loading.gif" lazyload alt="21423572850708f447c70112b71b58fe"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/4715d2573fb1cca2b0ad7ffd60d4cf77.png" srcset="/img/loading.gif" lazyload alt="4715d2573fb1cca2b0ad7ffd60d4cf77"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/036abaa6e3c3efa4258a1ebb6a9a3f74.png" srcset="/img/loading.gif" lazyload alt="036abaa6e3c3efa4258a1ebb6a9a3f74"></p>
<h6 id="3-微服务到微服务的传递"><a href="#3-微服务到微服务的传递" class="headerlink" title="3.微服务到微服务的传递"></a>3.微服务到微服务的传递</h6><p>OpenFeign传递<br>OpenFeign-提供了一个拦截器</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5e22d64051c12080b52e137b3f2df8d1.png" srcset="/img/loading.gif" lazyload alt="5e22d64051c12080b52e137b3f2df8d1"></p>
<h3 id="nacos配置管理"><a href="#nacos配置管理" class="headerlink" title="nacos配置管理"></a>nacos配置管理</h3><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c302ab029433076c8f27b8b744e77da4.png" srcset="/img/loading.gif" lazyload alt="c302ab029433076c8f27b8b744e77da4"></p>
<p>解决配置写死-以及重复配置等问题</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/788621b778db5d0475a1459c7f47f2ef.png" srcset="/img/loading.gif" lazyload alt="788621b778db5d0475a1459c7f47f2ef"></p>
<h6 id="1-配置共享"><a href="#1-配置共享" class="headerlink" title="1.配置共享"></a>1.配置共享</h6><p>1.naocs<strong>添加配置</strong></p>
<p>password : ${hm.db.password:}</p>
<ul>
<li>数据库database：可以通过${hm.db.database:test}来设定，默认值test</li>
</ul>
<p>2.微服务拉取配置</p>
<p>将共享配置与本地的application.yaml配置合并</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/34f7f37b9b9c8cd0cf8312e5f077eeb4.png" srcset="/img/loading.gif" lazyload alt="34f7f37b9b9c8cd0cf8312e5f077eeb4"></p>
<p>依赖</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c7b8cd24915878d194e94777d1dc125c.png" srcset="/img/loading.gif" lazyload alt="c7b8cd24915878d194e94777d1dc125c"></p>
<p>bootstart.yaml</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9ab61eb239f97e8060fb49f7e71f0e1.png" srcset="/img/loading.gif" lazyload alt="d9ab61eb239f97e8060fb49f7e71f0e1"></p>
<p>hm.db.database:test<br>hm:<br>  db:<br>      database:hm</p>
<p>-&gt;指定参数</p>
<h6 id="2-配置热更新"><a href="#2-配置热更新" class="headerlink" title="2.配置热更新"></a>2.配置热更新</h6><p>例–如我们的购物车上线是10–我们想要通过配置管理-<br>这里也可以用数据库的方法进行控制-但是配置方法更节约资源<br>1.nacos添加配置<br>2.微服务读取配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/bb27fd15744a4ce0dbbebcec3c82fded.png" srcset="/img/loading.gif" lazyload alt="bb27fd15744a4ce0dbbebcec3c82fded"></p>
<p>指定配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7bd5b3ef60ef4f21a05d38e55b3c9c97.png" srcset="/img/loading.gif" lazyload alt="7bd5b3ef60ef4f21a05d38e55b3c9c97"></p>
<p>get读取即可</p>
<p>类似心跳检测机制一样的更新</p>
<h6 id="3-动态路由"><a href="#3-动态路由" class="headerlink" title="3.动态路由"></a>3.动态路由</h6><p>动态路由</p>
<p>网关的路由配置全部是在项目启动时由org.springframework.cloud.gateway.route.CompositeRouteDefinitionLocator在项目启动的时候加载，并且一经加载就会缓存到内存中的路由表内（一个Map），不会改变。也不会监听路由变更，所以，我们无法利用上节课学习的配置热更新来实现路由更新。</p>
<p>因此，我们必须<strong>监听Nacos的配置变更</strong>，然后手动把最新的路由更新到路由表中。</p>
<p>1.nacos配置实时更新</p>
<p><a target="_blank" rel="noopener" href="https://nacos.io/zh-cn/docs/sdk.html">https://nacos.io/zh-cn/docs/sdk.html</a></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/247218cd325db9d0990af715191c506f.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">serverAddr:</span> Nacos 服务器的地址，用户需要将 &#123;serverAddr&#125; 替换为实际的 Nacos 服务地址。<br><span class="hljs-symbol">dataId:</span> 配置项的唯一标识符，Nacos 通过 dataId 来标记不同的配置文件。<br><span class="hljs-symbol">group:</span> 配置的组名，Nacos 允许将配置划分为不同的组以便管理，默认为 <span class="hljs-string">&quot;DEFAULT_GROUP&quot;</span>。<br></code></pre></td></tr></table></figure>



<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">这里通过 <span class="hljs-built_in">Properties</span> 对象来存储 <span class="hljs-variable">Nacos</span> 的配置信息。特别是 <span class="hljs-variable">Nacos</span> 服务器地址 <span class="hljs-variable">serverAddr</span>。<br>通过 <span class="hljs-variable">NacosFactory</span><span class="hljs-operator">.</span><span class="hljs-variable">createConfigService</span><span class="hljs-punctuation">(</span><span class="hljs-variable">properties</span><span class="hljs-punctuation">)</span> 创建了一个 <span class="hljs-variable">ConfigService</span> 对象，用于与 <span class="hljs-variable">Nacos</span> 配置中心进行交互。<br></code></pre></td></tr></table></figure>

<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">通过 addListener 方法为指定的 dataId 和 <span class="hljs-keyword">group</span> <span class="hljs-title">添加一个监听器，当该配置有变化时，Nacos</span> 会通知客户端。<br>receiveConfig<span class="hljs-literal">Inf</span>o 方法是监听器的回调函数，当配置发生变化时，该方法会接收到变化的配置信息，并打印出来。<br>getExecutor 方法允许用户自定义线程池执行监听回调任务，返回 null 表示使用 Nacos 内部的默认线程池。<br><br><br>getConfig 方法用于同步获取当前 dataId 和 <span class="hljs-keyword">group</span> <span class="hljs-title">对应的配置内容。</span><br><span class="hljs-title">其中 5000</span> 是超时时间，表示如果在 <span class="hljs-number">5</span> 秒内没有获取到配置内容则会超时。<br><br></code></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0fccbe790ea662f50e4dc78e637dfeb9.png" srcset="/img/loading.gif" lazyload></p>
<p>路由更新接口<img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eb2704aaff009260682661686d43a863.png" srcset="/img/loading.gif" lazyload alt="eb2704aaff009260682661686d43a863"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3834ba9c13d5c8765637fa028b2d2540.png" srcset="/img/loading.gif" lazyload alt="3834ba9c13d5c8765637fa028b2d2540"></p>
<p>如上-网关路由的检测-和网关路由的更改已经完毕-接下来就是实例</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1be7a5e7b5ff63918edfb6a98a4df1e8.png" srcset="/img/loading.gif" lazyload alt="1be7a5e7b5ff63918edfb6a98a4df1e8"></p>
<hr>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21dbf7eb235492bb336c2ee5a9b1d495.png" srcset="/img/loading.gif" lazyload alt="21dbf7eb235492bb336c2ee5a9b1d495"></p>
<hr>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9283c00f8a1b26caba5a8ea4a7d47102.png" srcset="/img/loading.gif" lazyload alt="9283c00f8a1b26caba5a8ea4a7d47102"># 微服务02</p>
<p>网关过滤器-全局-和指定-&gt;网关登录鉴权-&gt;</p>
<p>微服务到微服务-&gt;Feing拦截器</p>
<p>naocs-&gt;配置共享 -配置热更新-动态路由</p>
<h2 id="Getway网关-1"><a href="#Getway网关-1" class="headerlink" title="Getway网关"></a>Getway网关</h2><h6 id="1-网关了解-1"><a href="#1-网关了解-1" class="headerlink" title="1.网关了解"></a>1.网关了解</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/814cd85a1c02b2c0d6fcb82731791e49.png" srcset="/img/loading.gif" lazyload alt="814cd85a1c02b2c0d6fcb82731791e49"></p>
<h6 id="2-SpringGetWay网关-1"><a href="#2-SpringGetWay网关-1" class="headerlink" title="2.SpringGetWay网关"></a>2.SpringGetWay网关</h6><p>1.创建网关微服务<br>2.引入依赖<br>3.编写启动类<br>4.配置网关路由</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/33c9a08d518a78765fcfda164468e9ed.png" srcset="/img/loading.gif" lazyload alt="33c9a08d518a78765fcfda164468e9ed"></p>
<p>配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/e602e00dfea1425d97903200ab20744d.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>规则合集</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/906530d2a10b4728e2e15ef674b795ab.png" srcset="/img/loading.gif" lazyload alt="906530d2a10b4728e2e15ef674b795ab"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eba4edc2810d7f0f0c3a6af446baf9c6.png" srcset="/img/loading.gif" lazyload alt="eba4edc2810d7f0f0c3a6af446baf9c6"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a10173c12662023f3b425ef0fa1cf022.png" srcset="/img/loading.gif" lazyload alt="a10173c12662023f3b425ef0fa1cf022"></p>
<h6 id="3-网关登录鉴权-1"><a href="#3-网关登录鉴权-1" class="headerlink" title="3.网关登录鉴权"></a>3.网关登录鉴权</h6><p>登录思路-很多敏感思路都需要鉴权-我们又不可能重复写鉴权代码<br>故此网关思路即可<br>既然网关是所有微服务的入口，一切请求都需要先经过网关。我们完全可以把登录校验的工作放到网关去做，这样之前说的问题就解决了：</p>
<ul>
<li>只需要在网关和用户服务保存秘钥</li>
<li>只需要在网关开发登录校验功能</li>
<li></li>
</ul>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d7f0640d795ce3dfac74f1cd2921f308.png" srcset="/img/loading.gif" lazyload alt="d7f0640d795ce3dfac74f1cd2921f308"></p>
<p>1.网关传递用户信息-加信息头<br>2.服务直接传递信息-&gt;加信息头</p>
<h3 id="网关过滤器-1"><a href="#网关过滤器-1" class="headerlink" title="网关过滤器"></a>网关过滤器</h3><h6 id="1-过滤器了解-1"><a href="#1-过滤器了解-1" class="headerlink" title="1.过滤器了解"></a>1.过滤器了解</h6><p>网关的请求转发-由于getway实现<br>具体实现</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/8462748af036d85d5789334d705224cc.png" srcset="/img/loading.gif" lazyload alt="8462748af036d85d5789334d705224cc"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c715d9286b13c80bef8c74b434f3eabc.png" srcset="/img/loading.gif" lazyload alt="c715d9286b13c80bef8c74b434f3eabc"></p>
<p>定义一个网关过滤器<br>进行登录逻辑判断-&gt;再Nett….之前</p>
<p>网关过滤器<br>1.路由过滤器 GatewayFilter指定规则<br>2.全局过滤器 GlobalFilter 全局规则</p>
<p>过滤器链之外还有一种过滤器，HttpHeadersFilter，用来处理传递到下游微服务的请求头。</p>
<p>FilteringWebHandeler处理会将全局-装饰为路由-放到同一过滤器链中<br>依次执行</p>
<p>spring cloude<br>指定的 路由过滤器<br><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories">https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories</a></p>
<h6 id="2-内置过滤器-1"><a href="#2-内置过滤器-1" class="headerlink" title="2.内置过滤器"></a>2.内置过滤器</h6><p>gateway内置的GatewayFilter过滤器使用起来非常简单，无需编码，只要在yaml文件中简单配置即可。而且其作用范围也很灵活，配置在哪个Route下，就作用于哪个Route.</p>
<p>AddRequestHeaderGatewayFilterFacotry<br>使用配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/88ec0600e28b2a9d0ca37d52cefc3d1f.png" srcset="/img/loading.gif" lazyload alt="88ec0600e28b2a9d0ca37d52cefc3d1f"></p>
<h6 id="3-网关路由器-GatewayFilter-1"><a href="#3-网关路由器-GatewayFilter-1" class="headerlink" title="3.网关路由器 GatewayFilter"></a>3.网关路由器 GatewayFilter</h6><p>自定义GatewayFilter不是直接实现GatewayFilter，而是实现AbstractGatewayFilterFactory</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1f41d6a93c5a68ed3df317daf479a836.png" srcset="/img/loading.gif" lazyload alt="1f41d6a93c5a68ed3df317daf479a836"></p>
<p>该类的名称一定要以GatewayFilterFactory为后缀！</p>
<p>spring:<br>  cloud:<br>    gateway:<br>      default-filters:<br>            - PrintAny # 此处直接以自定义的GatewayFilterFactory类名称前缀类声明过滤器</p>
<h6 id="4-动态配置参数-GatewayFilter-1"><a href="#4-动态配置参数-GatewayFilter-1" class="headerlink" title="4.动态配置参数 GatewayFilter"></a>4.动态配置参数 GatewayFilter</h6><p>过滤器动态配置参数</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7fe049b96c1496d2914d63fb65f8a192.png" srcset="/img/loading.gif" lazyload alt="7fe049b96c1496d2914d63fb65f8a192"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/a4e216499c59db0b068a2d2adcfb6344.png" srcset="/img/loading.gif" lazyload alt="a4e216499c59db0b068a2d2adcfb6344"></p>
<h6 id="5-全局过滤器-GlobalFilter-1"><a href="#5-全局过滤器-GlobalFilter-1" class="headerlink" title="5.全局过滤器 GlobalFilter"></a>5.全局过滤器 GlobalFilter</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/b8745f34d893608b923694068caa317a.png" srcset="/img/loading.gif" lazyload alt="b8745f34d893608b923694068caa317a"></p>
<h4 id="案例-网关登录鉴权-1"><a href="#案例-网关登录鉴权-1" class="headerlink" title="案例 -网关登录鉴权"></a>案例 -网关登录鉴权</h4><p>登录效验编写-<br>思路<br>全局过滤器中-对jwt进行解析-同时解析完毕将信息构造请求头中-以待微服务拿取-<br>如果解析失败-就直接返回</p>
<h6 id="1-网关拦截-转user-传递到请求头中-1"><a href="#1-网关拦截-转user-传递到请求头中-1" class="headerlink" title="1.网关拦截-转user-&gt;传递到请求头中"></a>1.网关拦截-转user-&gt;传递到请求头中</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9d50e713326b10f6cbc455e35ac9982.png" srcset="/img/loading.gif" lazyload alt="d9d50e713326b10f6cbc455e35ac9982"></p>
<h6 id="2-网关到微服务-1"><a href="#2-网关到微服务-1" class="headerlink" title="2.网关到微服务"></a>2.网关到微服务</h6><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21423572850708f447c70112b71b58fe.png" srcset="/img/loading.gif" lazyload alt="21423572850708f447c70112b71b58fe"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/4715d2573fb1cca2b0ad7ffd60d4cf77.png" srcset="/img/loading.gif" lazyload alt="4715d2573fb1cca2b0ad7ffd60d4cf77"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/036abaa6e3c3efa4258a1ebb6a9a3f74.png" srcset="/img/loading.gif" lazyload alt="036abaa6e3c3efa4258a1ebb6a9a3f74"></p>
<h6 id="3-微服务到微服务的传递-1"><a href="#3-微服务到微服务的传递-1" class="headerlink" title="3.微服务到微服务的传递"></a>3.微服务到微服务的传递</h6><p>OpenFeign传递<br>OpenFeign-提供了一个拦截器</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/5e22d64051c12080b52e137b3f2df8d1.png" srcset="/img/loading.gif" lazyload alt="5e22d64051c12080b52e137b3f2df8d1"></p>
<h3 id="nacos配置管理-1"><a href="#nacos配置管理-1" class="headerlink" title="nacos配置管理"></a>nacos配置管理</h3><p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c302ab029433076c8f27b8b744e77da4.png" srcset="/img/loading.gif" lazyload alt="c302ab029433076c8f27b8b744e77da4"></p>
<p>解决配置写死-以及重复配置等问题</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/788621b778db5d0475a1459c7f47f2ef.png" srcset="/img/loading.gif" lazyload alt="788621b778db5d0475a1459c7f47f2ef"></p>
<h6 id="1-配置共享-1"><a href="#1-配置共享-1" class="headerlink" title="1.配置共享"></a>1.配置共享</h6><p>1.naocs<strong>添加配置</strong></p>
<p>password : ${hm.db.password:}</p>
<ul>
<li>数据库database：可以通过${hm.db.database:test}来设定，默认值test</li>
</ul>
<p>2.微服务拉取配置</p>
<p>将共享配置与本地的application.yaml配置合并</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/34f7f37b9b9c8cd0cf8312e5f077eeb4.png" srcset="/img/loading.gif" lazyload alt="34f7f37b9b9c8cd0cf8312e5f077eeb4"></p>
<p>依赖</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/c7b8cd24915878d194e94777d1dc125c.png" srcset="/img/loading.gif" lazyload alt="c7b8cd24915878d194e94777d1dc125c"></p>
<p>bootstart.yaml</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/d9ab61eb239f97e8060fb49f7e71f0e1.png" srcset="/img/loading.gif" lazyload alt="d9ab61eb239f97e8060fb49f7e71f0e1"></p>
<p>hm.db.database:test<br>hm:<br>  db:<br>      database:hm</p>
<p>-&gt;指定参数</p>
<h6 id="2-配置热更新-1"><a href="#2-配置热更新-1" class="headerlink" title="2.配置热更新"></a>2.配置热更新</h6><p>例–如我们的购物车上线是10–我们想要通过配置管理-<br>这里也可以用数据库的方法进行控制-但是配置方法更节约资源<br>1.nacos添加配置<br>2.微服务读取配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/bb27fd15744a4ce0dbbebcec3c82fded.png" srcset="/img/loading.gif" lazyload alt="bb27fd15744a4ce0dbbebcec3c82fded"></p>
<p>指定配置</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/7bd5b3ef60ef4f21a05d38e55b3c9c97.png" srcset="/img/loading.gif" lazyload alt="7bd5b3ef60ef4f21a05d38e55b3c9c97"></p>
<p>get读取即可</p>
<p>类似心跳检测机制一样的更新</p>
<h6 id="3-动态路由-1"><a href="#3-动态路由-1" class="headerlink" title="3.动态路由"></a>3.动态路由</h6><p>动态路由</p>
<p>网关的路由配置全部是在项目启动时由org.springframework.cloud.gateway.route.CompositeRouteDefinitionLocator在项目启动的时候加载，并且一经加载就会缓存到内存中的路由表内（一个Map），不会改变。也不会监听路由变更，所以，我们无法利用上节课学习的配置热更新来实现路由更新。</p>
<p>因此，我们必须<strong>监听Nacos的配置变更</strong>，然后手动把最新的路由更新到路由表中。</p>
<p>1.nacos配置实时更新</p>
<p><a target="_blank" rel="noopener" href="https://nacos.io/zh-cn/docs/sdk.html">https://nacos.io/zh-cn/docs/sdk.html</a></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/247218cd325db9d0990af715191c506f.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">serverAddr:</span> Nacos 服务器的地址，用户需要将 &#123;serverAddr&#125; 替换为实际的 Nacos 服务地址。<br><span class="hljs-symbol">dataId:</span> 配置项的唯一标识符，Nacos 通过 dataId 来标记不同的配置文件。<br><span class="hljs-symbol">group:</span> 配置的组名，Nacos 允许将配置划分为不同的组以便管理，默认为 <span class="hljs-string">&quot;DEFAULT_GROUP&quot;</span>。<br></code></pre></td></tr></table></figure>



<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica">这里通过 <span class="hljs-built_in">Properties</span> 对象来存储 <span class="hljs-variable">Nacos</span> 的配置信息。特别是 <span class="hljs-variable">Nacos</span> 服务器地址 <span class="hljs-variable">serverAddr</span>。<br>通过 <span class="hljs-variable">NacosFactory</span><span class="hljs-operator">.</span><span class="hljs-variable">createConfigService</span><span class="hljs-punctuation">(</span><span class="hljs-variable">properties</span><span class="hljs-punctuation">)</span> 创建了一个 <span class="hljs-variable">ConfigService</span> 对象，用于与 <span class="hljs-variable">Nacos</span> 配置中心进行交互。<br></code></pre></td></tr></table></figure>

<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">通过 addListener 方法为指定的 dataId 和 <span class="hljs-keyword">group</span> <span class="hljs-title">添加一个监听器，当该配置有变化时，Nacos</span> 会通知客户端。<br>receiveConfig<span class="hljs-literal">Inf</span>o 方法是监听器的回调函数，当配置发生变化时，该方法会接收到变化的配置信息，并打印出来。<br>getExecutor 方法允许用户自定义线程池执行监听回调任务，返回 null 表示使用 Nacos 内部的默认线程池。<br><br><br>getConfig 方法用于同步获取当前 dataId 和 <span class="hljs-keyword">group</span> <span class="hljs-title">对应的配置内容。</span><br><span class="hljs-title">其中 5000</span> 是超时时间，表示如果在 <span class="hljs-number">5</span> 秒内没有获取到配置内容则会超时。<br><br></code></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/0fccbe790ea662f50e4dc78e637dfeb9.png" srcset="/img/loading.gif" lazyload></p>
<p>路由更新接口<img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/eb2704aaff009260682661686d43a863.png" srcset="/img/loading.gif" lazyload alt="eb2704aaff009260682661686d43a863"></p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/3834ba9c13d5c8765637fa028b2d2540.png" srcset="/img/loading.gif" lazyload alt="3834ba9c13d5c8765637fa028b2d2540"></p>
<p>如上-网关路由的检测-和网关路由的更改已经完毕-接下来就是实例</p>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/1be7a5e7b5ff63918edfb6a98a4df1e8.png" srcset="/img/loading.gif" lazyload alt="1be7a5e7b5ff63918edfb6a98a4df1e8"></p>
<hr>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/21dbf7eb235492bb336c2ee5a9b1d495.png" srcset="/img/loading.gif" lazyload alt="21dbf7eb235492bb336c2ee5a9b1d495"></p>
<hr>
<p><img src="https://raw.githubusercontent.com/Xlan-cell/tupian/master/9283c00f8a1b26caba5a8ea4a7d47102.png" srcset="/img/loading.gif" lazyload alt="9283c00f8a1b26caba5a8ea4a7d47102"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/spring/" class="category-chain-item">spring</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>微服务Spring Cloude</div>
      <div>http://example.com/2024/09/20/微服务01/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年9月20日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/09/21/%E4%BA%91%E5%B2%9A4/" title="云岚到家支付退款  状态机设计 03">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">云岚到家支付退款  状态机设计 03</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/09/19/%E4%BA%91%E5%B2%9A%E6%94%AF%E4%BB%983/" title="云岚到家支付退款 03">
                        <span class="hidden-mobile">云岚到家支付退款 03</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createCssLink('https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.css')
      Fluid.utils.createScript('https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.js', function() {
        var options = Object.assign(
          {"serverURL":"https://abc.nixgou.cn/","path":"window.location.pathname","meta":["nick"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],"dark":"html[data-user-color-scheme=\"dark\"]","wordLimit":0,"pageSize":10},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        Waline.init(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          var imgSelector = '#waline .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
